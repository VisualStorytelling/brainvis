{"version":3,"sources":["webpack:///../provenance-slide-deck/dist/provenance-slide-deck.es5.js","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/brainvis-canvas-controls/brainvis-canvas-controls.component.css","webpack:///./src/app/brainvis-canvas-controls/brainvis-canvas-controls.component.html","webpack:///./src/app/brainvis-canvas-controls/brainvis-canvas-controls.component.ts","webpack:///./src/app/brainvis-canvas/brainvis-canvas.component.css","webpack:///./src/app/brainvis-canvas/brainvis-canvas.component.ts","webpack:///./src/app/brainvis-canvas/intersectionManager.ts","webpack:///./src/app/brainvis-canvas/objectSelector.ts","webpack:///./src/app/brainvis-canvas/provenanceActions.ts","webpack:///./src/app/brainvis-canvas/provenanceListeners.ts","webpack:///./src/app/brainvis-canvas/sliceManipulatorWidget.ts","webpack:///./src/app/brainvis-canvas/stlLoader.ts","webpack:///./src/app/brainvis-canvas/trackball.ts","webpack:///./src/app/provenance-slides/provenance-slides.component.css","webpack:///./src/app/provenance-slides/provenance-slides.component.ts","webpack:///./src/app/provenance-visualization/provenance-visualization.component.css","webpack:///./src/app/provenance-visualization/provenance-visualization.component.ts","webpack:///./src/app/provenance.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/init.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,IAAI;AACvB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,IAAI;AACvB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,aAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qCAAqC;AAC/E;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kDAAkD,aAAa,EAAE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,4BAA4B,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,wCAAwC,mCAAmC,EAAE;AAC7E;AACA,mCAAmC,mCAAmC,EAAE;AACxE;AACA,0CAA0C,gDAAgD,EAAE;AAC5F,mCAAmC,2DAA2D,EAAE;AAChG,wCAAwC,sCAAsC,EAAE;AAChF;AACA,mCAAmC,2DAA2D,EAAE;AAChG;AACA,wDAAwD,2DAA2D,EAAE;AACrH;AACA,mCAAmC,2DAA2D,EAAE;AAChG;AACA,mCAAmC,kFAAkF,EAAE;AACvH,8BAA8B,mBAAmB,EAAE;AACnD;AACA,mCAAmC,kFAAkF,EAAE;AACvH,8BAA8B,4CAA4C,EAAE;AAC5E;AACA,mCAAmC,kFAAkF,EAAE;AACvH,8BAA8B,6CAA6C,EAAE;AAC7E;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,CAAC,wBAAwB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,WAAW;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAqB;AACvC,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEQ;AACR;;;;;;;;;;;;AChpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;;;;;ACZA,uCAAuC,YAAY,GAAG,qBAAqB,uBAAuB,cAAc,gBAAgB,qCAAqC,GAAG,eAAe,sBAAsB,mCAAmC,0CAA0C,8CAA8C,kBAAkB,YAAY,GAAG,oBAAoB,uBAAuB,gBAAgB,GAAG,G;;;;;;;;;;;ACAva,61B;;;;;;;;;;;;;;;;;;;;;;;;;ACAkD;AACO;AAOzD;IAEE,sBAAoB,UAA6B;QAA7B,eAAU,GAAV,UAAU,CAAmB;QADjD,UAAK,GAAG,KAAK,CAAC;QAEZ,oBAAoB;QACpB,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAC7B,CAAC;IACD,+BAAQ,GAAR;QACE,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;IARU,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;yCAGgC,qEAAiB;OAFtC,YAAY,CASxB;IAAD,mBAAC;CAAA;AATwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRiC;AACqB;AAEtC;AAEM;AAEU;AAC6B;AAC0B;AAEL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","file":"main.js","sourcesContent":["import { event, select, drag } from 'd3';\n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\r\n *  https://github.com/developit/mitt\r\n *  commit: 820ac6a172efbbd472e0a802ffad6a882f0cbb27\r\n *  MIT Licence\r\n *    Copyright 2018 Jason Miller\r\n *    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n *    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n *    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n *  @name mitt\r\n *  @author Jason Miller\r\n *  @returns {Mitt}\r\n */\r\nfunction mitt(all) {\r\n    all = all || Object.create(null);\r\n    return {\r\n        /**\r\n         * Register an event handler for the given type.\r\n         *\r\n         * @param  {String} type\tType of event to listen for\r\n         * @param  {Function} handler Function to call in response to given event\r\n         * @memberOf mitt\r\n         */\r\n        on(type, handler) {\r\n            (all[type] || (all[type] = [])).push(handler);\r\n        },\r\n        /**\r\n         * Remove an event handler for the given type.\r\n         *\r\n         * @param  {String} type\tType of event to unregister `handler` from\r\n         * @param  {Function} handler Handler function to remove\r\n         * @memberOf mitt\r\n         */\r\n        off(type, handler) {\r\n            if (all[type]) {\r\n                all[type].splice(all[type].indexOf(handler) >>> 0, 1);\r\n            }\r\n        },\r\n        /**\r\n         * Invoke all handlers for the given type.\r\n         *\r\n         * @param {String} type  The event type to invoke\r\n         * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\r\n         * @memberOf mitt\r\n         */\r\n        emit(type, evt) {\r\n            (all[type] || []).slice().map((handler) => {\r\n                handler(evt);\r\n            });\r\n        }\r\n    };\r\n}\n\nfunction generateUUID() {\r\n    // Public Domain/MIT\r\n    var d = new Date().getTime();\r\n    if (typeof performance !== 'undefined' &&\r\n        typeof performance.now === 'function') {\r\n        d += performance.now(); // use high-precision timer if available\r\n    }\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = ((d + Math.random() * 16) % 16) | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\r\n    });\r\n}\r\n/**\r\n * Generate a Unix timestamp in milliseconds\r\n *\r\n * @returns {number} in milliseconds\r\n */\r\nfunction generateTimestamp() {\r\n    // Removed, because performance.now() returns a floating point number, which is not compatible with the Date.getTime() integer\r\n    // if (\r\n    //   window.performance &&\r\n    //   window.performance.now &&\r\n    //   window.performance.timing &&\r\n    //   window.performance.timing.navigationStart\r\n    // ) {\r\n    //   return window.performance.now();\r\n    // }\r\n    return new Date().getTime();\r\n}\r\n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\r\n *  @name mitt\r\n *  @returns {Mitt}\r\n */\r\nfunction mitt$1(all) {\r\n    all = all || Object.create(null);\r\n    return {\r\n        /**\r\n         * Register an event handler for the given type.\r\n         *\r\n         * @param  {String} type\tType of event to listen for\r\n         * @param  {Function} handler Function to call in response to given event\r\n         * @memberOf mitt\r\n         */\r\n        on: function (type, handler) {\r\n            (all[type] || (all[type] = [])).push(handler);\r\n        },\r\n        /**\r\n         * Remove an event handler for the given type.\r\n         *\r\n         * @param  {String} type\tType of event to unregister `handler` from\r\n         * @param  {Function} handler Handler function to remove\r\n         * @memberOf mitt\r\n         */\r\n        off: function (type, handler) {\r\n            if (all[type]) {\r\n                all[type].splice(all[type].indexOf(handler) >>> 0, 1);\r\n            }\r\n        },\r\n        /**\r\n         * Invoke all handlers for the given type.\r\n         *\r\n         * @param {String} type  The event type to invoke\r\n         * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\r\n         * @memberOf mitt\r\n         */\r\n        emit: function (type, evt) {\r\n            (all[type] || []).slice().map(function (handler) {\r\n                handler(evt);\r\n            });\r\n        }\r\n    };\r\n}\n\n/**\r\n * Provenance Graph implementation\r\n *\r\n * @param version The version of the software to track the provenance of\r\n *\r\n */\r\nvar ProvenanceGraph = /** @class */ (function () {\r\n    function ProvenanceGraph(application, userid, rootNode) {\r\n        if (userid === void 0) { userid = 'Unknown'; }\r\n        this._nodes = {};\r\n        this._mitt = mitt$1();\r\n        this.application = application;\r\n        if (rootNode) {\r\n            this.root = rootNode;\r\n        }\r\n        else {\r\n            this.root = {\r\n                id: generateUUID(),\r\n                label: 'Root',\r\n                metadata: {\r\n                    createdBy: userid,\r\n                    createdOn: generateTimestamp()\r\n                },\r\n                children: [],\r\n                artifacts: {}\r\n            };\r\n        }\r\n        this.addNode(this.root);\r\n        this._current = this.root;\r\n    }\r\n    ProvenanceGraph.prototype.addNode = function (node) {\r\n        if (this._nodes[node.id]) {\r\n            throw new Error('Node already added');\r\n        }\r\n        this._nodes[node.id] = node;\r\n        this._mitt.emit('nodeAdded', node);\r\n    };\r\n    ProvenanceGraph.prototype.getNode = function (id) {\r\n        var result = this._nodes[id];\r\n        if (!result) {\r\n            throw new Error('Node id not found');\r\n        }\r\n        return this._nodes[id];\r\n    };\r\n    Object.defineProperty(ProvenanceGraph.prototype, \"current\", {\r\n        get: function () {\r\n            return this._current;\r\n        },\r\n        set: function (node) {\r\n            if (!this._nodes[node.id]) {\r\n                throw new Error('Node id not found');\r\n            }\r\n            this._current = node;\r\n            this._mitt.emit('currentChanged', node);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ProvenanceGraph.prototype, \"nodes\", {\r\n        get: function () {\r\n            return this._nodes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ProvenanceGraph.prototype.emitNodeChangedEvent = function (node) {\r\n        /* istanbul ignore if */\r\n        if (!this._nodes[node.id]) {\r\n            throw new Error('Node id not found');\r\n        }\r\n        this._mitt.emit('nodeChanged', node);\r\n    };\r\n    ProvenanceGraph.prototype.on = function (type, handler) {\r\n        this._mitt.on(type, handler);\r\n    };\r\n    ProvenanceGraph.prototype.off = function (type, handler) {\r\n        this._mitt.off(type, handler);\r\n    };\r\n    return ProvenanceGraph;\r\n}());\n\nclass ProvenanceSlide {\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    get node() {\r\n        return this._node;\r\n    }\r\n    set node(value) {\r\n        this._node = value;\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    set name(value) {\r\n        this._name = value;\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(value) {\r\n        this._duration = value;\r\n    }\r\n    get delay() {\r\n        return this._delay;\r\n    }\r\n    set delay(value) {\r\n        this._delay = value;\r\n    }\r\n    addAnnotation(annotation) {\r\n        this._annotations.push(annotation);\r\n    }\r\n    removeAnnotation(annotation) {\r\n        const index = this._annotations.indexOf(annotation);\r\n        this._annotations.splice(index, 1);\r\n    }\r\n    get annotations() {\r\n        return this._annotations;\r\n    }\r\n    constructor(name, duration, delay, annotations = [], node = null) {\r\n        this._id = generateUUID();\r\n        this._name = name;\r\n        this._duration = duration;\r\n        this._delay = delay;\r\n        this._annotations = annotations;\r\n        this._node = node;\r\n    }\r\n}\n\nfunction firstArgThis(f) {\r\n    return function (...args) {\r\n        return f(this, ...args);\r\n    };\r\n}\r\nclass ProvenanceSlidedeckVisualization {\r\n    constructor(slideDeck, elm) {\r\n        this._tableHeight = 1000;\r\n        this._tableWidth = 300;\r\n        this._minimumSlideDuration = 3100;\r\n        this._barHeightTimeMultiplier = .01;\r\n        this._barWidth = 300;\r\n        this._barPadding = 5;\r\n        this._resizebarheight = 5;\r\n        this._maxSlides = 20;\r\n        this._timeIndexedSlides = [];\r\n        this._index = (slide) => {\r\n            return this._slideDeck.slides.indexOf(slide);\r\n        };\r\n        this.onDelete = (slide) => {\r\n            this._slideDeck.removeSlide(slide);\r\n        };\r\n        this.onSelect = (slide) => {\r\n            if (event.defaultPrevented)\r\n                return;\r\n            this._slideDeck.selectedSlide = slide;\r\n        };\r\n        this.onAdd = () => {\r\n            let slideDeck = this._slideDeck;\r\n            const node = slideDeck.graph.current;\r\n            const slide = new ProvenanceSlide(node.label, 5000, 0, [], node);\r\n            slideDeck.addSlide(slide, slideDeck.selectedSlide\r\n                ? slideDeck.slides.indexOf(slideDeck.selectedSlide) + 1\r\n                : slideDeck.slides.length);\r\n        };\r\n        this.moveDragged = (that, draggedObject) => {\r\n            select(that).attr(\"transform\", (slide) => {\r\n                const originalY = this.previousSlidesHeight(slide);\r\n                const draggedY = event.y;\r\n                const myIndex = this._slideDeck.slides.indexOf(slide);\r\n                if (draggedY < originalY && myIndex > 0) {\r\n                    // check upwards                \r\n                    const previousSlide = this._slideDeck.slides[myIndex - 1];\r\n                    let previousSlideCenterY = this.previousSlidesHeight(previousSlide) + (this.barTotalHeight(previousSlide) / 2);\r\n                    if (draggedY < previousSlideCenterY) {\r\n                        this._slideDeck.moveSlide(myIndex, myIndex - 1);\r\n                    }\r\n                }\r\n                else if (draggedY > originalY && myIndex < this._slideDeck.slides.length - 1) {\r\n                    // check downwards\r\n                    const nextSlide = this._slideDeck.slides[myIndex + 1];\r\n                    let nextSlideCenterY = this.previousSlidesHeight(nextSlide) + (this.barTotalHeight(nextSlide) / 2);\r\n                    if (draggedY > nextSlideCenterY) {\r\n                        this._slideDeck.moveSlide(myIndex, myIndex + 1);\r\n                    }\r\n                }\r\n                return \"translate(0,\" + event.y + \")\";\r\n            });\r\n        };\r\n        this.moveDragended = (that, draggedObject) => {\r\n            select(that).classed(\"active\", false)\r\n                .attr(\"transform\", (slide) => {\r\n                return \"translate(0,\" + this.previousSlidesHeight(slide) + \")\";\r\n            });\r\n        };\r\n        this.delayDragged = (that, slide) => {\r\n            slide.delay = Math.max(0, event.y) / this._barHeightTimeMultiplier;\r\n            this.update();\r\n        };\r\n        this.delaySubject = (that, slide) => {\r\n            return { y: this.barDelayHeight(slide) };\r\n        };\r\n        this.durationDragged = (that, slide) => {\r\n            slide.duration = Math.max(0, event.y) / this._barHeightTimeMultiplier;\r\n            this.update();\r\n        };\r\n        this.durationSubject = (that, slide) => {\r\n            return { y: this.barDurationHeight(slide) };\r\n        };\r\n        this._slideDeck = slideDeck;\r\n        this._root = select(elm);\r\n        this._slideTable = this._root.append('svg')\r\n            .attr('class', 'slide__table')\r\n            .attr('height', this._tableHeight).attr('width', this._tableWidth);\r\n        this._slideTable.append('rect')\r\n            .attr('class', 'slides_background_rect')\r\n            .attr('x', 0)\r\n            .attr('y', 0)\r\n            .attr('height', this._tableHeight)\r\n            .attr('width', this._tableWidth);\r\n        slideDeck.on('slideAdded', () => this.update());\r\n        slideDeck.on('slideRemoved', () => this.update());\r\n        slideDeck.on('slidesMoved', () => this.update());\r\n        slideDeck.on('slideSelected', () => this.update());\r\n        const addSlideButton = this._root.append('button').text('add slide');\r\n        addSlideButton.on('click', this.onAdd);\r\n        this.update();\r\n    }\r\n    moveDragStarted(draggedObject) {\r\n        select(this).raise().classed(\"active\", true);\r\n    }\r\n    barDelayHeight(slide) {\r\n        let calculatedHeight = this._barHeightTimeMultiplier * slide.delay;\r\n        return Math.max(calculatedHeight, 0);\r\n    }\r\n    barDurationHeight(slide) {\r\n        let calculatedHeight = this._barHeightTimeMultiplier * slide.duration;\r\n        return Math.max(calculatedHeight, this._minimumSlideDuration * this._barHeightTimeMultiplier);\r\n    }\r\n    barTotalHeight(slide) {\r\n        let calculatedHeight = this.barDelayHeight(slide) + this.barDurationHeight(slide) + 2 * this._resizebarheight;\r\n        return calculatedHeight;\r\n    }\r\n    previousSlidesHeight(slide) {\r\n        let myIndex = this._slideDeck.slides.indexOf(slide);\r\n        let calculatedHeight = 0;\r\n        for (let i = 0; i < myIndex; i++) {\r\n            calculatedHeight += this.barTotalHeight(this._slideDeck.slides[i]);\r\n        }\r\n        return calculatedHeight;\r\n    }\r\n    updateTimeIndices(slideDeck) {\r\n        this._timeIndexedSlides = [];\r\n        let timeIndex = 0;\r\n        slideDeck.slides.forEach(slide => {\r\n            this._timeIndexedSlides.push({ slide: slide, startTime: timeIndex });\r\n            timeIndex += slide.delay + slide.duration;\r\n        });\r\n    }\r\n    update() {\r\n        this.updateTimeIndices(this._slideDeck);\r\n        const allExistingNodes = this._slideTable.selectAll('g')\r\n            .data(this._slideDeck.slides, (d) => { return d.id; });\r\n        const newNodes = allExistingNodes.enter().append('g')\r\n            .call(drag()\r\n            .clickDistance([2, 2])\r\n            .on('start', this.moveDragStarted)\r\n            .on('drag', firstArgThis(this.moveDragged))\r\n            .on('end', firstArgThis(this.moveDragended)));\r\n        newNodes.append('rect')\r\n            .attr('class', 'slides_delay_resize')\r\n            .attr('x', this._barPadding)\r\n            .attr('width', this._barWidth - 2 * this._barPadding)\r\n            .attr('height', this._resizebarheight)\r\n            .attr('cursor', 'ns-resize')\r\n            .call(drag()\r\n            .subject(firstArgThis(this.delaySubject))\r\n            .on('drag', firstArgThis(this.delayDragged)));\r\n        newNodes.append('rect')\r\n            .attr('class', 'slides_delay_rect')\r\n            .attr('x', this._barPadding)\r\n            .attr('y', 0)\r\n            .attr('width', this._barWidth - 2 * this._barPadding)\r\n            .on('click', this.onSelect);\r\n        newNodes.append('rect')\r\n            .attr('class', 'slides_rect')\r\n            .attr('x', this._barPadding)\r\n            .attr('width', this._barWidth - 2 * this._barPadding)\r\n            .attr('cursor', 'move')\r\n            .on('click', this.onSelect);\r\n        newNodes.append('rect')\r\n            .attr('class', 'slides_duration_resize')\r\n            .attr('x', this._barPadding)\r\n            .attr('width', this._barWidth - 2 * this._barPadding)\r\n            .attr('height', this._resizebarheight)\r\n            .attr('cursor', 'ns-resize')\r\n            .call(drag()\r\n            .subject(firstArgThis(this.durationSubject))\r\n            .on('drag', firstArgThis(this.durationDragged)));\r\n        newNodes.append('text')\r\n            .attr('class', 'slides_text')\r\n            .attr('x', 2 * this._barPadding)\r\n            .attr(\"dy\", \".35em\");\r\n        newNodes.append('text')\r\n            .attr('class', 'slides_delaytext')\r\n            .attr('x', this._barWidth / 2 + 2 * this._barPadding)\r\n            .attr(\"dy\", \".35em\");\r\n        newNodes.append('text')\r\n            .attr('class', 'slides_durationtext')\r\n            .attr('x', this._barWidth / 2 + 2 * this._barPadding)\r\n            .attr(\"dy\", \".35em\");\r\n        // newNodes.append('rect')\r\n        //     .attr('class', 'slides_delete_rect')\r\n        //     .attr('x', this._barWidth - 50 + 2 * this._barPadding)\r\n        //     .attr('width', 50 - 4 * this._barPadding)\r\n        //     .attr('height', 50 - 4 * this._barPadding)\r\n        //     .attr('id', (data: IProvenanceSlide) => { return 'delete_' + data.id; })\r\n        //     .on('click', this.onDelete);\r\n        newNodes.append('image')\r\n            .attr('class', 'slides_delete_icon')\r\n            .attr(\"xlink:href\", \"https://upload.wikimedia.org/wikipedia/commons/7/7d/Trash_font_awesome.svg\")\r\n            .attr('x', this._barWidth - 50 + 2 * this._barPadding)\r\n            .attr(\"width\", 32)\r\n            .attr(\"height\", 32)\r\n            .on('click', this.onDelete);\r\n        // Update all nodes\r\n        const allNodes = newNodes.merge(allExistingNodes)\r\n            .attr(\"transform\", (slide) => {\r\n            return \"translate(0,\" + this.previousSlidesHeight(slide) + \")\";\r\n        });\r\n        allNodes.select('rect.slides_delay_rect')\r\n            .attr('height', (slide) => { return this.barDelayHeight(slide); });\r\n        allNodes.select('rect.slides_delay_resize')\r\n            .attr('y', (slide) => { return this.barDelayHeight(slide); });\r\n        allNodes.select('rect.slides_rect')\r\n            .attr('selected', (slide) => { return this._slideDeck.selectedSlide === slide; })\r\n            .attr('y', (slide) => { return this.barDelayHeight(slide) + this._resizebarheight; })\r\n            .attr('height', (slide) => { return this.barDurationHeight(slide); });\r\n        allNodes.select('rect.slides_duration_resize')\r\n            .attr('y', (slide) => { return this.barTotalHeight(slide) - this._resizebarheight; });\r\n        // allNodes.select('rect.slides_delete_rect')\r\n        //     .attr('y', (slide: IProvenanceSlide) => { return this.barDelayHeight(slide) + this._resizebarheight; });\r\n        allNodes.select('image.slides_delete_icon')\r\n            .attr('y', (slide) => { return this.barDelayHeight(slide) + this._resizebarheight; });\r\n        allNodes.select('text.slides_text')\r\n            .attr('y', (slide) => { return this.barDelayHeight(slide) + this._resizebarheight + 2 * this._barPadding; })\r\n            .text((slide) => { return slide.name; });\r\n        allNodes.select('text.slides_delaytext')\r\n            .attr('y', (slide) => { return this.barDelayHeight(slide) + this._resizebarheight + 1 * this._barPadding; })\r\n            .text((slide) => { return 'transition: ' + slide.delay / 1000; });\r\n        allNodes.select('text.slides_durationtext')\r\n            .attr('y', (slide) => { return this.barDelayHeight(slide) + this._resizebarheight + 4 * this._barPadding; })\r\n            .text((slide) => { return 'duration: ' + slide.duration / 1000; });\r\n        allExistingNodes.exit().remove();\r\n    }\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter$1(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nvar STATUS;\r\n(function (STATUS) {\r\n    STATUS[STATUS[\"IDLE\"] = 0] = \"IDLE\";\r\n    STATUS[STATUS[\"PLAYING\"] = 1] = \"PLAYING\";\r\n})(STATUS || (STATUS = {}));\r\nconst wait = (duration) => new Promise(resolve => setTimeout(resolve, duration));\r\nclass ProvenanceSlidePlayer {\r\n    constructor(slides, selectCallback) {\r\n        this._selectCallback = selectCallback;\r\n        this._slides = slides;\r\n        this._currentSlideIndex = 0;\r\n        this._status = STATUS.IDLE;\r\n    }\r\n    setSlideIndex(slideIndex) {\r\n        this._currentSlideIndex = slideIndex;\r\n    }\r\n    get slides() {\r\n        return this._slides;\r\n    }\r\n    get currentSlideIndex() {\r\n        return this._currentSlideIndex;\r\n    }\r\n    play() {\r\n        return __awaiter$1(this, void 0, void 0, function* () {\r\n            const shouldPlayNext = () => (this._status === STATUS.PLAYING &&\r\n                this._currentSlideIndex < this._slides.length - 1);\r\n            if (this._status === STATUS.IDLE) {\r\n                this._status = STATUS.PLAYING;\r\n                do {\r\n                    const slide = this._slides[this._currentSlideIndex];\r\n                    yield wait(slide.duration);\r\n                    if (shouldPlayNext()) {\r\n                        this._currentSlideIndex += 1;\r\n                        this._selectCallback(this._slides[this._currentSlideIndex]);\r\n                    }\r\n                } while (shouldPlayNext());\r\n            }\r\n            this._status = STATUS.IDLE;\r\n        });\r\n    }\r\n    get status() {\r\n        return this._status;\r\n    }\r\n    stop() {\r\n        this._status = STATUS.IDLE;\r\n    }\r\n}\n\nclass ProvenanceSlidedeck {\r\n    constructor(application, traverser) {\r\n        this._slides = [];\r\n        this._captainPlaceholder = new ProvenanceSlide('Captain Placeholder', 0, 0);\r\n        this._mitt = mitt();\r\n        this._application = application;\r\n        this._graph = traverser.graph;\r\n        this._traverser = traverser;\r\n        this._selectedSlide = null;\r\n    }\r\n    get application() {\r\n        return this._application;\r\n    }\r\n    addSlide(slide, index) {\r\n        if (!index || isNaN(index) || !Number.isInteger(index) || index > this._slides.length || index < 0) {\r\n            index = this._slides.length;\r\n        }\r\n        if (slide && this._slides.indexOf(slide) >= 0) {\r\n            throw (new Error('Cannot add a slide that is already in the deck'));\r\n        }\r\n        if (!slide) {\r\n            const node = this._graph.current;\r\n            slide = new ProvenanceSlide(node.label, 1, 0, [], node);\r\n        }\r\n        if (this._slides.length === 0) {\r\n            this._selectedSlide = slide;\r\n        }\r\n        this._slides.splice(index, 0, slide);\r\n        this._mitt.emit('slideAdded', slide);\r\n        return slide;\r\n    }\r\n    removeSlideAtIndex(index) {\r\n        let deletedSlides = this._slides.splice(index, 1);\r\n        // This can only be 1 slide now, therefore this is ok.\r\n        if (this._selectedSlide === deletedSlides[0]) {\r\n            this.selectedSlide = null;\r\n        }\r\n        this._mitt.emit('slideRemoved', deletedSlides[0]);\r\n    }\r\n    removeSlide(slide) {\r\n        this.removeSlideAtIndex(this._slides.indexOf(slide));\r\n    }\r\n    get selectedSlide() {\r\n        return this._selectedSlide;\r\n    }\r\n    moveSlide(indexFrom, indexTo) {\r\n        if (indexTo < 0 || indexTo > this.slides.length - 1) {\r\n            throw new Error('target index out of bounds');\r\n        }\r\n        if (indexTo >= this._slides.length) {\r\n            let k = indexTo - this._slides.length + 1;\r\n            while (k--) {\r\n                this._slides.push(this._captainPlaceholder);\r\n            }\r\n        }\r\n        this._slides.splice(indexTo, 0, this._slides.splice(indexFrom, 1)[0]);\r\n        this._mitt.emit('slidesMoved', this._slides);\r\n    }\r\n    startTime(slide) {\r\n        const index = this._slides.indexOf(slide);\r\n        let previousTime = 0;\r\n        for (let i = 0; i < index; i++) {\r\n            previousTime += this._slides[i].delay;\r\n            previousTime += this._slides[i].duration;\r\n        }\r\n        return previousTime;\r\n    }\r\n    slideAtTime(time) {\r\n        let index = 0;\r\n        let currentSlide = null;\r\n        while (time >= 0 && index < this.slides.length) {\r\n            currentSlide = this.slides[index];\r\n            let nextSlideOffset = currentSlide.delay + currentSlide.duration;\r\n            if (time - nextSlideOffset < 0) {\r\n                break;\r\n            }\r\n            time -= nextSlideOffset;\r\n            index++;\r\n        }\r\n        return currentSlide;\r\n    }\r\n    set selectedSlide(slide) {\r\n        if (slide && slide.node) {\r\n            this._traverser.toStateNode(slide.node.id);\r\n        }\r\n        this._selectedSlide = slide;\r\n        this._mitt.emit('slideSelected', slide);\r\n    }\r\n    get slides() { return this._slides; }\r\n    get graph() { return this._graph; }\r\n    on(type, handler) {\r\n        this._mitt.on(type, handler);\r\n    }\r\n    off(type, handler) {\r\n        this._mitt.off(type, handler);\r\n    }\r\n}\n\nexport { ProvenanceSlidedeck, ProvenanceSlide, ProvenanceSlidedeckVisualization, ProvenanceSlidePlayer };\n//# sourceMappingURL=provenance-slide-deck.es5.js.map\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"app-brainvis-canvas {\\n  flex: 1;\\n}\\n#bottom-container {\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  background-color: rgba(0,0,0,.8);\\n}\\nmat-sidenav {\\n  overflow: visible;\\n  visibility: visible !important;\\n  background-color: rgba(0, 0, 0, .8)\\n}\\nmat-sidenav-container, mat-sidenav-content {\\n  display: flex;\\n  flex: 1;\\n}\\n#sidenav-trigger {\\n  position: absolute;\\n  left: -50px;\\n}\\n\"","module.exports = \"<mat-sidenav-container hasBackdrop=\\\"false\\\">\\n  <mat-sidenav position=\\\"end\\\" #sidenav mode=\\\"over\\\" [opened]=\\\"false\\\" hasBackdrop=\\\"false\\\">\\n    <button id=\\\"sidenav-trigger\\\" color=\\\"primary\\\" style=\\\"color: white\\\" mat-icon-button (click)=\\\"sidenav.toggle()\\\">\\n      <mat-icon>menu</mat-icon>\\n    </button>\\n\\n    Sidenav content\\n    <app-provenance-visualization></app-provenance-visualization>\\n    <app-provenance-slides></app-provenance-slides>\\n  </mat-sidenav>\\n\\n\\n  <mat-sidenav-content>\\n    <app-brainvis-canvas #canvas></app-brainvis-canvas>\\n    <div id=\\\"bottom-container\\\">\\n      <app-brainvis-canvas-controls [canvas]=\\\"canvas\\\"></app-brainvis-canvas-controls>\\n    </div>\\n    <!--<p><mat-slide-toggle>sidenav.opened</mat-slide-toggle></p>-->\\n    <!--<p></p>-->\\n  </mat-sidenav-content>\\n</mat-sidenav-container>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { ProvenanceService } from './provenance.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  title = 'app';\n  constructor(private provenance: ProvenanceService) {\n    // console.log(arg);\n    console.log('constructor');\n  }\n  ngOnInit() {\n    console.log('init?');\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\n\nimport { ProvenanceService } from './provenance.service';\nimport { BrainvisCanvasComponent } from './brainvis-canvas/brainvis-canvas.component';\nimport { BrainvisCanvasControlsComponent } from './brainvis-canvas-controls/brainvis-canvas-controls.component';\n\nimport { MatIconModule, MatSidenavModule, MatSlideToggleModule, MatButtonModule } from '@angular/material';\nimport { FormsModule } from '@angular/forms';\nimport { ProvenanceVisualizationComponent } from './provenance-visualization/provenance-visualization.component';\nimport { ProvenanceSlidesComponent } from './provenance-slides/provenance-slides.component';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    BrainvisCanvasComponent,\n    BrainvisCanvasControlsComponent,\n    ProvenanceVisualizationComponent,\n    ProvenanceSlidesComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    BrowserAnimationsModule,\n    MatButtonModule,\n    MatSlideToggleModule,\n    MatSidenavModule,\n    MatIconModule,\n  ],\n  providers: [ProvenanceService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","module.exports = \":host {\\n  display: flex;\\n  color: white;\\n  margin: 1em;\\n  flex-direction: column;\\n}\\n\"","module.exports = \"<div class=\\\"noSelectText\\\">\\n  Light direction\\n  <div>\\n    <div class=\\\"circle\\\" id=\\\"circle\\\">\\n      <div class='dot' id=\\\"dot\\\"></div>\\n    </div>\\n  </div>\\n</div>\\n<mat-slide-toggle [(ngModel)]=\\\"canvas.showSliceHandle\\\">\\n  Show slice handle\\n</mat-slide-toggle>\\n<mat-slide-toggle [(ngModel)]=\\\"canvas.showSlice\\\">\\n  Show slice\\n</mat-slide-toggle>\\n<mat-slide-toggle [(ngModel)]=\\\"canvas.showObjects\\\">\\n  Show segmented objects\\n</mat-slide-toggle>\\n<div>\\n  <button mat-button color=\\\"primary\\\" id=\\\"alignButton\\\">Align to slice</button>\\n</div>\\n\\n\"","import { Component, Input, OnInit } from '@angular/core';\nimport { BrainvisCanvasComponent } from '../brainvis-canvas/brainvis-canvas.component';\n\n@Component({\n  selector: 'app-brainvis-canvas-controls',\n  templateUrl: './brainvis-canvas-controls.component.html',\n  styleUrls: ['./brainvis-canvas-controls.component.css']\n})\nexport class BrainvisCanvasControlsComponent {\n  @Input() canvas: BrainvisCanvasComponent;\n}\n","module.exports = \":host {\\n  display: block;\\n}\\n\"","import { Component, ElementRef, EventEmitter, Input, OnInit, Output } from '@angular/core';\n\nimport * as THREE from 'three';\nimport * as AMI from 'ami.js';\n\nimport { IOrientation, ISlicePosition } from './types';\n\nimport Trackball from './trackball';\nimport SliceManipulatorWidget from './sliceManipulatorWidget';\nimport STLLoader from './stlLoader';\nimport { IntersectionManager, StaticGeometryListener } from './intersectionManager';\nimport ObjectSelector from './objectSelector';\nimport { ProvenanceService } from '../provenance.service';\nimport { registerActions } from './provenanceActions';\nimport { addListeners } from './provenanceListeners';\n\n@Component({\n  selector: 'app-brainvis-canvas',\n  template: '',\n  styleUrls: ['./brainvis-canvas.component.css']\n})\nexport class BrainvisCanvasComponent extends THREE.EventDispatcher implements OnInit {\n  private _showSlice = true;\n  private _showSliceHandle = true;\n  private _showObjects: boolean;\n\n  @Input() set showSlice(showSlice: boolean) {\n    this._showSlice = showSlice;\n    this.toggleSlice(showSlice);\n    this.onShowSlice.emit(showSlice);\n  }\n  @Output() onShowSlice = new EventEmitter<boolean>();\n  get showSlice() { return this._showSlice; }\n\n  @Input() set showSliceHandle(showSliceHandle: boolean) {\n    this._showSliceHandle = showSliceHandle;\n    this.toggleSliceHandle(showSliceHandle);\n    this.onShowSliceHandle.emit(showSliceHandle);\n  }\n  @Output() onShowSliceHandle = new EventEmitter<boolean>();\n  get showSliceHandle() { return this._showSliceHandle; }\n\n\n  @Input() set showObjects(showObjects: boolean) {\n    this._showObjects = showObjects;\n  }\n  get showObjects() { return this._showObjects; }\n\n\n  private width: number;\n  private height: number;\n  private elem: Element;\n  private scene = new THREE.Scene();\n  private objects = new THREE.Object3D(); // all the loaded objects go in here\n  private camera: THREE.PerspectiveCamera;\n  private renderer = new THREE.WebGLRenderer();\n  private controls: Trackball;\n  private stackHelper: AMI.StackHelper;\n  private sliceManipulator: SliceManipulatorWidget;\n  private sliceCheckbox: HTMLInputElement;\n  private sliceHandleCheckbox: HTMLInputElement;\n  private showObjectCheckbox: HTMLInputElement;\n\n  private directionalLight: THREE.DirectionalLight;\n  private lightRotation: THREE.Vector3 = new THREE.Vector3(0, 0, 0);\n\n  // for the 2D slice\n  private alignButton: HTMLInputElement;\n  // stored gui state to recoveren when swithing back from 2D view\n  private cachedCameraOrigin: THREE.Vector3;\n  private cachedCameraTarget: THREE.Vector3;\n  private cachedCameraUp: THREE.Vector3;\n  private cachedSliceHandleVisibility: boolean;\n  private cachedObjectsShown: boolean;\n\n  // callback to call when loading is completed\n  private loadCompeletedCallback: () => void;\n\n  private intersectionManager: IntersectionManager;\n  private objectSelector: ObjectSelector;\n\n  constructor(elem: ElementRef, provenance: ProvenanceService) {\n    super();\n    registerActions(provenance.registry, this);\n    addListeners(provenance.tracker, this);\n    this.elem = elem.nativeElement;\n  }\n\n  ngOnInit() {\n    // todo: remove object from window\n    (window as any).canvas = this;\n    this.width = this.elem.clientWidth;\n    this.height = this.elem.clientHeight;\n\n    this.scene.background = new THREE.Color('black');\n    this.camera = new THREE.PerspectiveCamera(75, this.width / this.height, 0.1, 10000);\n\n    this.renderer.setSize(this.width, this.height);\n\n    const canvasElm = this.renderer.domElement;\n    this.elem.appendChild(canvasElm);\n    canvasElm.style.display = 'block';\n\n    // Setup controls\n    this.controls = new Trackball(this.camera, this.renderer.domElement);\n\n    this.scene.add(this.objects);\n\n    // Initial camera position\n    this.controls.position0.set(0, 0, 5);\n    this.controls.reset();\n\n    this.initScene();\n\n    // // div with buttons\n    // const elem2 = document.createElement('div');\n    // elem2.classList.add('gui');\n    // elem2.innerHTML = ` <div >\n    //                         <div class=\"noSelectText\">\n    //                             Light direction\n    //                             <div>\n    //                                 <div class=\"circle\" id=\"circle\">\n    //                                     <div class='dot' id=\"dot\"></div>\n    //                                 </div>\n    //                             </div>\n    //                         </div>\n    //                         <div>\n    //                             <input type=\"checkbox\" checked id=\"sliceCheckbox\">Show slice</input><br/>\n    //                             <input type=\"checkbox\" id=\"sliceHandleCheckbox\">Show slice handle</input><br/>\n    //                             <input type=\"button\" id=\"alignButton\" value=\"Alight to slice\" class=\"btn\" style=\"color: black\"><br/>\n    //                             </br>\n    //                             <input type=\"checkbox\" checked id=\"showObjectCheckbox\">Show segmented objects</input><br/>\n    //                         </div>\n    //                     </div>`;\n    // this.elem.appendChild(elem2);\n    // this.sliceCheckbox = document.getElementById('sliceCheckbox') as HTMLInputElement;\n    // this.sliceCheckbox.addEventListener('change', this.sliceToggled);\n    // this.sliceHandleCheckbox = document.getElementById('sliceHandleCheckbox') as HTMLInputElement;\n    // this.sliceHandleCheckbox.addEventListener('change', this.sliceHandleToggled);\n    // this.showObjectCheckbox = document.getElementById('showObjectCheckbox') as HTMLInputElement;\n    // this.showObjectCheckbox.addEventListener('change', this.showObjectsToggled);\n    //\n    // this.alignButton = document.getElementById('alignButton') as HTMLInputElement;\n    // this.alignButton.addEventListener('click', this.moveCameraTo2DSlice);\n\n    // const circleElement = document.getElementById('circle');\n    // let isDragging;\n    // circleElement.addEventListener('mousedown', function(e) {\n    //   return isDragging = true;\n    // });\n    // document.addEventListener('mouseup', function(e) {\n    //   return isDragging = false;\n    // });\n    // document.addEventListener('mousemove', function(e) {\n    //   let centerX;\n    //   let centerY;\n    //   let circle;\n    //   let deltaX;\n    //   let deltY;\n    //   let posX;\n    //   let posY;\n    //   let dot;\n    //   if (isDragging) {\n    //     circle = document.getElementById('circle');\n    //     const boundRect = circle.getBoundingClientRect();\n    //     centerX = boundRect.x + boundRect.width / 2;\n    //     centerY = boundRect.y + boundRect.height / 2;\n    //     posX = e.pageX;\n    //     posY = e.pageY;\n    //     deltaX = centerX - posX;\n    //     deltY = centerY - posY;\n    //     const posFromCenter = new THREE.Vector3(deltaX, deltY, 0);\n    //     posFromCenter.clampLength(0, boundRect.width / 2);\n    //     dot = document.getElementById('dot');\n    //     const dotWidth = dot.getBoundingClientRect().width;\n    //     dot.style.transform = 'translate(' + (boundRect.width / 2 - posFromCenter.x - dotWidth) + 'px,' + (boundRect.height / 2 - posFromCenter.y - dotWidth / 2) + 'px)';\n    //     posFromCenter.divideScalar(50.0);\n    //     this.lightRotation = posFromCenter.clone();\n    //     this.lightRotation.setX(-this.lightRotation.x);\n    //     return true;\n    //   }\n    // }.bind(this));\n\n    this.objectSelector = new ObjectSelector(this.objects);\n    this.intersectionManager = new IntersectionManager(this.renderer.domElement, this.camera);\n    this.intersectionManager.addListener(this.objectSelector);\n\n    this.addEventListeners();\n    this.animate();\n  }\n\n  initScene() {\n\n    // Setup lights\n    this.scene.add(new THREE.AmbientLight(0x222222));\n\n    this.directionalLight = new THREE.DirectionalLight(0xffffff, 1);\n    this.directionalLight.position.set(1, 1, 1).normalize();\n    this.scene.add(this.directionalLight);\n\n    // Setup loader\n    const loader = new AMI.VolumeLoader(this.renderer.domElement);\n\n    const t1 = [\n      '36747136', '36747150', '36747164', '36747178', '36747192', '36747206', '36747220', '36747234', '36747248', '36747262', '36747276', '36747290', '36747304', '36747318', '36747332', '36747346', '36747360', '36747374', '36747388', '36747402', '36747416', '36747430', '36747444', '36747458', '36747472', '36747486', '36747500', '36747514', '36747528', '36747542', '36747556', '36747570', '36747584', '36747598', '36747612', '36747626', '36747640', '36747654', '36747668', '36747682', '36747696', '36747710', '36747724', '36747738', '36747752', '36747766', '36747780', '36747794', '36747808', '36747822', '36747836', '36747850', '36747864', '36747878', '36747892', '36747906', '36747920', '36747934', '36747948', '36747962', '36747976', '36747990', '36748004', '36748018', '36748032', '36748046', '36748060', '36748074', '36748088', '36748102', '36748116', '36748130', '36748144', '36748158', '36748172', '36748186', '36748578', '36748592', '36748606', '36748620', '36748634', '36748648', '36748662', '36748676', '36748690', '36748704', '36748718', '36748732', '36748746', '36748760', '36748774', '36748788', '36748802', '36748816', '36748830', '36748844', '36748858', '36748872', '36748886', '36748900', '36748914', '36748928', '36748942', '36748956', '36748970', '36748984', '36748998', '36749012', '36749026', '36749040', '36749054', '36749068', '36749082', '36749096', '36749110', '36749124', '36749138', '36749152', '36749166', '36749180', '36749194', '36749208', '36749222', '36749236', '36749250', '36749264', '36749278', '36749292', '36749306', '36749320', '36749334', '36749348', '36749362', '36749376', '36749390', '36749404', '36749418', '36749446', '36749460', '36749474', '36749488', '36749502', '36749516', '36749530', '36749544', '36749558', '36749572', '36749586', '36749600', '36749614', '36749628', '36749642', '36749656', '36749670', '36749684', '36749698', '36749712', '36749726', '36749740', '36749754', '36749768', '36749782', '36749796', '36749810', '36749824', '36749838', '36749852', '36749866', '36749880', '36749894', '36749908', '36749922', '36749936', '36749950', '36749964'\n    ];\n\n    const files = t1.map(function(v) {\n      return 'https://cdn.rawgit.com/FNNDSC/data/master/dicom/adi_brain/' + v;\n    });\n\n    loader\n      .load(files)\n      .then(function() {\n        // merge files into clean series/stack/frame structure\n        const series = loader.data[0].mergeSeries(loader.data);\n        loader.free();\n        // loader = null;\n\n        // be carefull that series and target stack exist!\n        this.stackHelper = new AMI.StackHelper(series[0].stack[0]);\n        this.stackHelper.border.color = 0xffeb3b;\n        this.scene.add(this.stackHelper);\n        \n        // setup slice\n        const centerLPS = this.stackHelper.stack.worldCenter();\n        this.stackHelper.slice.aabbSpace = 'LPS';\n        this.stackHelper.slice.planePosition.x = centerLPS.x;\n        this.stackHelper.slice.planePosition.y = centerLPS.y;\n        this.stackHelper.slice.planePosition.z = centerLPS.z;\n        this.stackHelper.slice.planeDirection = new THREE.Vector3(1, 0, 0).normalize();\n        this.stackHelper.slice._update();\n        this.stackHelper.border.helpersSlice = this.stackHelper.slice;\n\n        const sliceGeometry = new StaticGeometryListener(this.stackHelper.slice);\n        this.intersectionManager.addListener(sliceGeometry);\n\n        // slice manipulator\n        this.sliceManipulator = new SliceManipulatorWidget(this.stackHelper, this.renderer.domElement, this.camera);\n        this.scene.add(this.sliceManipulator);\n        // this.sliceManipulator.visible = false;\n        this.sliceManipulator.addEventListener('zoomChange', this.onSlicePlaneZoomChange);\n        this.sliceManipulator.addEventListener('orientationChange', this.onSlicePlaneOrientationChange);\n        this.sliceManipulator.visible = this._showSliceHandle;\n\n        this.intersectionManager.addListener(this.sliceManipulator);\n\n        this.controls.initEventListeners();\n        // this.loadCompeletedCallback();\n      }.bind(this))\n      .catch(function(error) {\n        window.console.log('oops... something went wrong...');\n        window.console.log(error);\n      });\n\n    // Load STL model\n    const loaderSTL = new STLLoader();\n    loaderSTL.load('https://cdn.rawgit.com/FNNDSC/data/master/stl/adi_brain/WM.stl', function(geometry) {\n      const material = new THREE.MeshPhongMaterial({ color: 0xf44336, specular: 0x111111, shininess: 200 });\n      const mesh = new THREE.Mesh(geometry, material);\n      mesh.name = 'wm.stl';\n      // to LPS space\n      const rasToLPS = new THREE.Matrix4();\n      rasToLPS.set(-1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      mesh.applyMatrix(rasToLPS);\n      this.objects.add(mesh);\n    }.bind(this));\n  }\n\n  addEventListeners() {\n    this.controls.addEventListener('zoomstart', (event) => {\n      const position = this.controls.camera.position.toArray();\n      const target = this.controls.target.toArray();\n      const up = this.controls.camera.up.toArray();\n      const orientation = { position, target, up };\n\n      this.dispatchEvent({\n        type: 'zoomStart',\n        orientation\n      });\n    });\n\n    this.controls.addEventListener('zoomend', (event) => {\n      const position = this.controls.camera.position.toArray();\n      const target = this.controls.target.toArray();\n      const up = this.controls.camera.up.toArray();\n      const orientation = { position, target, up };\n\n      this.dispatchEvent({\n        type: 'zoomEnd',\n        orientation\n      });\n    });\n\n    this.controls.addEventListener('start', (event) => {\n      const position = this.controls.camera.position.toArray();\n      const target = this.controls.target.toArray();\n      const up = this.controls.camera.up.toArray();\n      const orientation = { position, target, up };\n\n      this.dispatchEvent({\n        type: 'cameraStart',\n        orientation\n      });\n    });\n\n    this.controls.addEventListener('end', (event) => {\n      const position = this.controls.camera.position.toArray();\n      const target = this.controls.target.toArray();\n      const up = this.controls.camera.up.toArray();\n      const orientation = { position, target, up };\n\n      this.dispatchEvent({\n        type: 'cameraEnd',\n        orientation\n      });\n    });\n\n    this.objectSelector.addEventListener('objectSelection', (event) => {\n      this.dispatchEvent(event);\n    });\n  }\n\n  setSize(width: number, height: number) {\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(width, height);\n    this.controls.handleResize();\n  }\n\n  setInteractive(interactive: boolean) {\n    this.controls.enabled = interactive;\n    if (this.sliceManipulator) {\n      this.sliceManipulator.enabled = interactive;\n    }\n    this.sliceCheckbox.disabled = !interactive;\n    this.sliceHandleCheckbox.disabled = !interactive || !this.sliceCheckbox.checked;\n    this.alignButton.disabled = !interactive || !this.sliceCheckbox.checked;\n  }\n\n  setControlZoom(newOrientation: IOrientation, within: number) {\n    this.controls.changeCamera(new THREE.Vector3(newOrientation.position[0], newOrientation.position[1], newOrientation.position[2]),\n      new THREE.Vector3(newOrientation.target[0], newOrientation.target[1], newOrientation.target[2]),\n      new THREE.Vector3(newOrientation.up[0], newOrientation.up[1], newOrientation.up[2]),\n      within > 0 ? within : 1000);\n  }\n\n  setControlOrientation(newOrientation: IOrientation, within: number) {\n    this.controls.changeCamera(new THREE.Vector3(newOrientation.position[0], newOrientation.position[1], newOrientation.position[2]),\n      new THREE.Vector3(newOrientation.target[0], newOrientation.target[1], newOrientation.target[2]),\n      new THREE.Vector3(newOrientation.up[0], newOrientation.up[1], newOrientation.up[2]),\n      within > 0 ? within : 1000);\n  }\n\n  animate = () => {\n    requestAnimationFrame(this.animate);\n\n    // update light position\n    if (this.stackHelper) {\n      const lightDir = this.camera.position.clone();\n      lightDir.sub(this.stackHelper.stack.worldCenter());\n      lightDir.normalize();\n\n      const lightRotationTemp = this.lightRotation.clone();\n      lightRotationTemp.applyQuaternion(this.camera.quaternion);\n\n      this.directionalLight.position.set(lightDir.x, lightDir.y, lightDir.z);\n      this.directionalLight.position.add(new THREE.Vector3(lightRotationTemp.x, lightRotationTemp.y, lightRotationTemp.z));\n      this.directionalLight.position.normalize();\n    }\n\n    this.controls.update();\n\n    this.render();\n  }\n\n  render() {\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  getSlicePlaneChanges = (event) => {\n    console.log(event);\n    const position = event.position.toArray();\n    const direction = event.direction.toArray();\n    const oldPosition = event.oldPosition.toArray();\n    const oldDirection = event.oldDirection.toArray();\n\n    return { position, direction, oldPosition, oldDirection };\n  }\n\n  onSlicePlaneOrientationChange = (event) => {\n    const changes = this.getSlicePlaneChanges(event);\n\n    this.dispatchEvent({\n      type: 'sliceOrientationChanged',\n      changes\n    });\n  }\n\n  onSlicePlaneZoomChange = (event) => {\n    const changes = this.getSlicePlaneChanges(event);\n\n    this.dispatchEvent({\n      type: 'sliceZoomChanged',\n      changes\n    });\n  }\n\n  onSliceVisibilityChange = (event) => {\n\n    this.dispatchEvent({\n      type: 'sliceVisibilityChanged',\n      change: event\n    });\n  }\n\n  onSliceHandleVisibilityChange = (event) => {\n\n    this.dispatchEvent({\n      type: 'sliceHandleVisibilityChanged',\n      change: event\n    });\n  }\n\n  setSlicePlanePosition(positions: ISlicePosition, within: number) {\n    if (this.stackHelper) {\n      this.sliceManipulator.changeSlicePosition(new THREE.Vector3(positions.position[0], positions.position[1], positions.position[2]),\n        new THREE.Vector3(positions.direction[0], positions.direction[1], positions.direction[2]), within > 0 ? within : 1000);\n    }\n  }\n\n  toggleSlice(state) {\n    if (this.stackHelper) {\n      this.stackHelper._slice.visible = state;\n      this.stackHelper._border.visible = state;\n      // this.sliceHandleCheckbox.disabled = !state;\n      // this.alignButton.disabled = !state;\n      // this.sliceCheckbox.checked = state;\n      if (state === false) {\n        this.sliceManipulator.visible = state;\n      } else {\n        this.sliceManipulator.visible = this._showSlice;\n      }\n    }\n  }\n\n  toggleSliceHandle(state) {\n    if (this.sliceManipulator) {\n      this.sliceManipulator.visible = state;\n      // this.sliceHandleCheckbox.checked = state;\n    }\n  }\n\n  sliceToggled = (checkBox) => {\n    this.toggleSlice(checkBox.currentTarget.checked);\n    this.onSliceVisibilityChange(checkBox.currentTarget.checked);\n  }\n  sliceHandleToggled = (checkBox) => {\n    this.toggleSliceHandle(checkBox.currentTarget.checked);\n    this.onSliceHandleVisibilityChange(checkBox.currentTarget.checked);\n  }\n\n  // slice alignment\n  moveCameraTo2DSlice = (event?) => {\n    if (this.stackHelper) {\n      // if this comes from the button we dispach an event to the provenance graph\n      // the graph will then call this function again\n      if (event) {\n        this.dispatchEvent({\n          type: 'sliceModeChanged',\n          mode2D: true\n        });\n        return;\n      }\n      this.controls.finishCurrentTransition();\n      this.sliceManipulator.finishCurrentTransition();\n      this.cachedCameraOrigin = this.controls.camera.position.clone();\n      this.cachedCameraTarget = this.controls.target.clone();\n      this.cachedCameraUp = this.controls.camera.up.clone();\n      this.cachedSliceHandleVisibility = this.sliceManipulator.visible;\n      this.cachedObjectsShown = this.objects.visible;\n      this.sliceManipulator.visible = false;\n      this.objects.visible = false;\n      const cameraPosition: THREE.Vector3 = this.stackHelper.slice.planePosition.clone();\n      cameraPosition.addScaledVector(this.stackHelper.slice.planeDirection, 150.0);\n      // choose a up vector that does not point in the same way as the target plane\n      const upVector = new THREE.Vector3(0, 0, 1);\n      if (Math.abs(this.stackHelper.slice.planeDirection.x) < 0.001 && Math.abs(this.stackHelper.slice.planeDirection.y) < 0.001) {\n        upVector.set(0, 1, 0);\n      }\n      this.controls.changeCamera(cameraPosition, this.stackHelper.slice.planePosition.clone(), upVector, 0);\n      this.alignButton.removeEventListener('click', this.moveCameraTo2DSlice);\n      this.alignButton.addEventListener('click', this.moveCameraFrom2DSlice);\n      this.alignButton.value = 'Back to 3D';\n      this.sliceCheckbox.disabled = true;\n      this.sliceHandleCheckbox.disabled = true;\n      this.showObjectCheckbox.disabled = true;\n      this.controls.enabled = false;\n    }\n  }\n\n  moveCameraFrom2DSlice = (event?) => {\n    if (this.stackHelper) {\n      // if this comes from the button we dispach an event to the provenance graph\n      // the graph will then call this function again\n      if (event) {\n        this.dispatchEvent({\n          type: 'sliceModeChanged',\n          mode2D: false\n        });\n        return;\n      }\n      this.controls.enabled = true;\n      this.controls.changeCamera(this.cachedCameraOrigin, this.cachedCameraTarget, this.cachedCameraUp, 0);\n      this.alignButton.removeEventListener('click', this.moveCameraFrom2DSlice);\n      this.alignButton.addEventListener('click', this.moveCameraTo2DSlice);\n      this.alignButton.value = 'Alight to slice';\n      this.sliceCheckbox.disabled = false;\n      this.sliceHandleCheckbox.disabled = false;\n      this.showObjectCheckbox.disabled = false;\n      this.sliceManipulator.visible = this.cachedSliceHandleVisibility;\n      this.objects.visible = this.cachedObjectsShown;\n    }\n  }\n\n  onShowObjectsChange = (visible) => {\n\n    this.dispatchEvent({\n      type: 'objectsVisibilityChanged',\n      change: visible\n    });\n  }\n\n  showObjectsToggled = (checkBox) => {\n    this.toggleObjects(checkBox.currentTarget.checked);\n    this.onShowObjectsChange(checkBox.currentTarget.checked);\n  }\n\n  toggleObjects(visible) {\n    this.objects.visible = visible;\n    this.showObjectCheckbox.checked = visible;\n  }\n\n  setSelection(newSelection) {\n    this.objectSelector.setSelection(newSelection);\n  }\n\n}\n","/*\nSpecial class to manage intersection with goemtry.\nSubsystems can register to be tested for intersections.\nAll subsytems gets mouse up/down/move messages but the substem with the closest hitpoint will get intersection information.\n*/\n\nimport * as THREE from 'three';\n// const { Event, Object3D } = THREE;\n\nexport interface IIntersectionListener {\n    onMouseDown: (intersection: THREE.Intersection, pointer : MouseEvent) => void;\n    onMouseUp: (intersection: THREE.Intersection, pointer : MouseEvent) => void;\n    onMouseMove: (intersection: THREE.Intersection, pointer : MouseEvent) => void;\n    getObjects: () => THREE.Object3D[];\n    isEnabled: () => boolean;\n}\n\nexport class StaticGeometryListener implements IIntersectionListener {\n    object: THREE.Object3D;\n\n    constructor(object: THREE.Object3D) {\n        this.object = object;\n    }\n\n    onMouseDown(intersection: THREE.Intersection, pointer: MouseEvent) {\n        //\n    }\n\n    onMouseUp(intersection: THREE.Intersection, pointer: MouseEvent) {\n        //\n    }\n\n    onMouseMove(intersection: THREE.Intersection, pointer: MouseEvent) {\n        //\n    }\n\n    getObjects() {\n        return this.object.children;\n    }\n\n    isEnabled() {\n        return this.object.visible;\n    }\n\n}\n\nexport class IntersectionManager {\n    private camera: THREE.Camera;\n    private domElement: Element;\n    private listeners: IIntersectionListener[] = [];\n    private raycaster = new THREE.Raycaster();\n\n    constructor(domElement, camera) {\n        this.camera = camera;\n        this.domElement = domElement;\n\n        domElement.addEventListener('mousemove', this.onMouseMove, false);\n        domElement.addEventListener('mousedown', this.onMouseDown, false);\n        domElement.addEventListener('mouseup', this.onMouseUp, false);\n    }\n\n    addListener(listener: IIntersectionListener) {\n        this.listeners.push(listener);\n    }\n\n    removeListener(listener: IIntersectionListener) {\n        const index = this.listeners.indexOf(listener);\n        if(index > -1) {\n            this.listeners.splice(index,1);\n        }\n    }\n\n    setUpRaycaster(pointer : MouseEvent) {\n        const rect = this.domElement.getBoundingClientRect();\n        const x = (pointer.clientX - rect.left) / rect.width;\n        const y = (pointer.clientY - rect.top) / rect.height;\n\n        const pointerVector = new THREE.Vector2((x * 2) - 1, - (y * 2) + 1);\n        this.raycaster.setFromCamera(pointerVector, this.camera);\n    }\n\n    intersectObjects(pointer : MouseEvent, objects : THREE.Object3D[]) {\n        this.setUpRaycaster(pointer);\n\n        const intersections = this.raycaster.intersectObjects(objects, true);\n        return intersections[0] ? intersections[0] : false;\n    }\n\n    getClosestObject(event : MouseEvent) : [IIntersectionListener, THREE.Intersection] {\n        this.setUpRaycaster(event);\n        let closestListener : IIntersectionListener;\n        let closestIntersection : THREE.Intersection;\n        for(const listener of this.listeners) {\n            if(listener.isEnabled()) {\n                const intersection = this.intersectObjects(event, listener.getObjects());\n                if(intersection !== false) {\n                    if(closestIntersection === undefined || (intersection.distance < closestIntersection.distance)) {\n                        closestIntersection = intersection;\n                        closestListener = listener;\n                    }\n                }\n            }\n        }\n        return [closestListener, closestIntersection];\n    }\n\n    onMouseDown = (event : MouseEvent) => {\n        const intersection = this.getClosestObject(event);\n        for(const listener of this.listeners) {\n            if(intersection[0] === listener) {\n                listener.onMouseDown(intersection[1],event);\n            } else {\n                listener.onMouseDown(undefined,event);\n            }\n        }\n    }\n\n    onMouseMove = (event) => {\n        const intersection = this.getClosestObject(event);\n        for(const listener of this.listeners) {\n            if(intersection[0] === listener) {\n                listener.onMouseMove(intersection[1],event);\n            } else {\n                listener.onMouseMove(undefined,event);\n            }\n        }\n    }\n\n    onMouseUp = (event) => {\n        const intersection = this.getClosestObject(event);\n        for(const listener of this.listeners) {\n            if(intersection[0] === listener) {\n                listener.onMouseUp(intersection[1],event);\n            } else {\n                listener.onMouseUp(undefined,event);\n            }\n        }\n    }\n}\n","import * as THREE from 'three';\n// const { Object3D } = THREE;\nimport { IIntersectionListener } from './intersectionManager';\n\nexport default class ObjectSelector  extends THREE.EventDispatcher implements IIntersectionListener {\n    private objects: THREE.Object3D;\n    private previosSelectedObject: THREE.Mesh;\n    private previousColor: number;\n\n    constructor(objects: THREE.Object3D) {\n        super();\n        this.objects = objects;\n    }\n\n    onMouseDown(intersection: THREE.Intersection, pointer: MouseEvent) {\n        if(intersection !== undefined) {\n            event.stopImmediatePropagation();\n        }\n        if(intersection !== undefined && this.previosSelectedObject !== intersection.object && intersection.object instanceof THREE.Mesh) {\n            const asMesh = <THREE.Mesh>intersection.object;\n            if(asMesh.material instanceof THREE.MeshPhongMaterial) {\n                let previousName: string = '';\n                if(this.previosSelectedObject ) {\n                    const asMeshPongMaterial = this.previosSelectedObject.material as THREE.MeshPhongMaterial;\n                    asMeshPongMaterial.color.setHex(this.previousColor);\n                    previousName = this.previosSelectedObject.name;\n                }\n                const asMeshPongMaterial = asMesh.material as THREE.MeshPhongMaterial;\n                this.previosSelectedObject = asMesh;\n                this.previousColor = asMeshPongMaterial.color.getHex();\n                asMeshPongMaterial.color.setHex(0x0000ff);\n                this.dispatchEvent({\n                    type: 'objectSelection',\n                    newObjectName: asMesh.name,\n                    previousObjectName: previousName\n                });\n            }\n        } else if(this.previosSelectedObject) {\n            const asMeshPongMaterial = <THREE.MeshPhongMaterial>this.previosSelectedObject.material;\n            asMeshPongMaterial.color.setHex(this.previousColor);\n            this.dispatchEvent({\n                type: 'objectSelection',\n                newObjectName: '',\n                previousObjectName: this.previosSelectedObject.name\n            });\n            this.previosSelectedObject = undefined;\n        }\n    }\n\n    onMouseUp(intersection: THREE.Intersection, pointer: MouseEvent) {\n        //\n    }\n\n    onMouseMove(intersection: THREE.Intersection, pointer: MouseEvent) {\n        //\n    }\n\n    getObjects() {\n        return this.objects.children;\n    }\n    isEnabled() {\n        return this.objects.visible;\n    }\n\n    setSelection(newSelection) {\n        let objectToSelect = undefined;\n        for(const object of this.objects.children) {\n            if(object.name === newSelection) {\n                objectToSelect = object;\n                break;\n            }\n        }\n        if(this.previosSelectedObject) {\n            const asMeshPongMaterial = <THREE.MeshPhongMaterial>this.previosSelectedObject.material;\n            asMeshPongMaterial.color.setHex(this.previousColor);\n            this.previosSelectedObject = undefined;\n        }\n        if(objectToSelect) {\n            const asMesh = <THREE.Mesh>objectToSelect;\n            if(asMesh.material instanceof THREE.MeshPhongMaterial) {\n                const asMeshPongMaterial = <THREE.MeshPhongMaterial>asMesh.material;\n                this.previosSelectedObject = asMesh;\n                this.previousColor = asMeshPongMaterial.color.getHex();\n                asMeshPongMaterial.color.setHex(0x0000ff);\n            }\n        }\n    }\n\n}\n","import { ActionFunction, ActionFunctionRegistry } from '@visualstorytelling/provenance-core';\nimport { BrainvisCanvasComponent } from './brainvis-canvas.component';\n\nconst getActions = (canvas: BrainvisCanvasComponent): {[key: string]: ActionFunction} => ({\n  setControlZoom: (args) => Promise.resolve(canvas.setControlZoom(args, 500)),\n  setSlicePlaneOrientation: (position, direction) => Promise.resolve(canvas.setSlicePlanePosition({position, direction}, 500)),\n  showSlice: (value: boolean) => Promise.resolve(canvas.showSlice = value),\n  showSliceHandle: (value: boolean) => Promise.resolve(canvas.showSliceHandle = value),\n});\n\nexport const registerActions = (registry: ActionFunctionRegistry, canvas: BrainvisCanvasComponent) => {\n  const actions = getActions(canvas);\n\n  Object.keys(actions).forEach(actionName => {\n    registry.register(actionName, actions[actionName]);\n  });\n\n};\n","import { ProvenanceTracker } from '@visualstorytelling/provenance-core';\nimport { debounce } from 'lodash';\nimport { BrainvisCanvasComponent } from './brainvis-canvas.component';\n\nexport const addListeners = (tracker: ProvenanceTracker, canvas: BrainvisCanvasComponent) => {\n  canvas.addEventListener('cameraStart', (startEvent) => {\n    const cameraEndListener = (event) => {\n      tracker.applyAction({\n        do: 'setControlZoom',\n        doArguments: [(event as any).orientation],\n        undo: 'setControlZoom',\n        undoArguments: [(startEvent as any).orientation],\n      });\n      canvas.removeEventListener('cameraEnd', cameraEndListener);\n    };\n    canvas.addEventListener('cameraEnd', cameraEndListener);\n  });\n\n  let zoomEndListener: EventListener = null;\n  const zoomStartListener = (startEvent) => {\n    canvas.removeEventListener('zoomEnd', zoomEndListener);\n    zoomEndListener = debounce ((event) => {\n      tracker.applyAction({\n        do: 'setControlZoom',\n        doArguments: [event.orientation],\n        undo: 'setControlZoom',\n        undoArguments: [startEvent.orientation],\n      }, true);\n    }, 500, { trailing: true });\n    canvas.addEventListener('zoomEnd', zoomEndListener);\n  };\n  canvas.addEventListener('zoomStart', debounce(zoomStartListener, 500, { leading: true }));\n\n\n  canvas.addEventListener('sliceOrientationChanged', (event: any) => {\n    const { position, direction, oldPosition, oldDirection } = event.changes;\n    console.log(position, direction, oldPosition, oldDirection);\n    tracker.applyAction({\n      do: 'setSlicePlaneOrientation',\n      doArguments: [position, direction],\n      undo: 'setSlicePlaneOrientation',\n      undoArguments: [oldPosition, oldDirection],\n    });\n  });\n\n  canvas.onShowSlice.subscribe(val => {\n    tracker.applyAction({\n      do: 'showSlice',\n      doArguments: [val],\n      undo: 'showSlice',\n      undoArguments: [!val],\n    }, true);\n  });\n\n  canvas.onShowSliceHandle.subscribe(val => {\n    tracker.applyAction({\n      do: 'showSliceHandle',\n      doArguments: [val],\n      undo: 'showSliceHandle',\n      undoArguments: [!val],\n    }, true);\n  });\n\n  // canvas.addEventListener('sliceZoomChanged', console.log);\n  // canvas.addEventListener('sliceVisibilityChanged', console.log);\n  // canvas.addEventListener('sliceHandleVisibilityChanged', console.log);\n  // canvas.addEventListener('sliceModeChanged', console.log);\n  // canvas.addEventListener('objectsVisibilityChanged', console.log);\n  // canvas.addEventListener('objectSelection', console.log);\n  // canvas.addEventListener('sliceZoomChanged', console.log);\n};\n","/**\n * Original author: Pjotr Svetachov\n */\n\nimport * as AMI from 'ami.js';\nimport * as THREE from 'three';\nimport {IntersectionManager, IIntersectionListener} from './intersectionManager';\n\nexport default class SliceManipulatorWidget extends THREE.Object3D implements IIntersectionListener {\n    private camera: THREE.Camera;\n    private domElement: Element;\n    private stackHelper: AMI.StackHelper;\n    private plane = new THREE.Plane();\n    private raycaster = new THREE.Raycaster();\n    private startIntersection = new THREE.Vector3();\n    private isDragging: boolean = false;\n\n    private geometryLine: THREE.Geometry;\n    private line: THREE.Line;\n    private cylinder: THREE.Mesh;\n    private arrowUp: THREE.Mesh;\n    private arrowDown: THREE.Mesh;\n    private originalSlicePosition: THREE.Vector3;\n    private sphere: THREE.Mesh;\n    private previousSelection;\n\n    private oldPosition: THREE.Vector3;\n    private oldDirection: THREE.Vector3;\n\n    private changeTimeout = undefined;\n    public enabled: boolean = true;\n\n    // values we are transitioning too\n    private toPosition: THREE.Vector3;\n    private toDirection: THREE.Vector3;\n\n    constructor(stackHelper, domElement, camera) {\n        super();\n\n        this.stackHelper = stackHelper;\n        this.domElement = domElement;\n        this.camera = camera;\n        this.visible = true;\n\n        // ray casting stuff\n        this.originalSlicePosition = stackHelper.slice.planeDirection.clone();\n\n        // make the geometry\n        stackHelper.slice.updateMatrixWorld();\n        const endPosition = stackHelper.slice.planeDirection.clone();\n        endPosition.multiplyScalar(80.0);\n        endPosition.add(stackHelper.slice.planePosition);\n        const middlePosition = stackHelper.slice.planeDirection.clone();\n        middlePosition.multiplyScalar(40.0);\n        middlePosition.add(stackHelper.slice.planePosition);\n\n        // line\n\n        const geometryCylinder = new THREE.CylinderGeometry(1.5, 1.5, 40, 8);\n        let material = new THREE.MeshBasicMaterial({ color: 0xffffff });\n        this.cylinder = new THREE.Mesh(geometryCylinder, material);\n        this.cylinder.position.set(middlePosition.x, middlePosition.y, middlePosition.z);\n        this.cylinder.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), stackHelper.slice.planeDirection);\n        this.add( this.cylinder );\n\n        const arrow = new THREE.ConeBufferGeometry(3.5, 10);\n        this.arrowUp = new THREE.Mesh(arrow, material);\n        this.arrowUp.position.set(middlePosition.x, middlePosition.y, middlePosition.z);\n        this.arrowUp.position.addScaledVector(stackHelper.slice.planeDirection,25);\n        this.arrowUp.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), stackHelper.slice.planeDirection);\n        this.add( this.arrowUp );\n\n        this.arrowDown = new THREE.Mesh(arrow, material);\n        this.arrowDown.position.set(middlePosition.x, middlePosition.y, middlePosition.z);\n        this.arrowDown.position.addScaledVector(stackHelper.slice.planeDirection,-25);\n        this.arrowDown.quaternion.setFromUnitVectors(new THREE.Vector3(0, -1, 0), stackHelper.slice.planeDirection);\n        this.add( this.arrowDown );\n\n\n        const materialLine = new THREE.LineBasicMaterial();\n        this.geometryLine = new THREE.Geometry();\n        this.geometryLine.vertices.push(stackHelper.slice.planePosition.clone());\n        this.geometryLine.vertices.push(endPosition);\n        this.geometryLine.verticesNeedUpdate = true;\n        this.line = new THREE.Line(this.geometryLine, materialLine);\n        this.add(this.line);\n\n        // sphre\n        const geometrySphere = new THREE.SphereGeometry(5, 32, 32);\n        material = new THREE.MeshBasicMaterial({ color: 0xffff00 });\n        this.sphere = new THREE.Mesh(geometrySphere, material);\n        this.sphere.position.copy(endPosition);\n        this.add(this.sphere);\n    }\n\n    onMouseDown(intersection: THREE.Intersection, pointer : MouseEvent) {\n        if (!this.visible || !this.enabled) {\n            return;\n        }\n        if(intersection !== undefined) {\n            event.stopImmediatePropagation();\n        }\n        if (this.previousSelection) {\n            this.previousSelection.material.color.set(0x00ff00);\n            this.oldPosition = this.stackHelper.slice.planePosition.clone();\n            this.oldDirection = this.stackHelper.slice.planeDirection.clone();\n            this.isDragging = true;\n            this.setUpRaycaster(pointer);\n            this.originalSlicePosition = this.stackHelper.slice.planePosition.clone();\n            this.raycaster.ray.intersectPlane(this.plane, this.startIntersection);\n        }\n    };\n    onMouseUp(intersection: THREE.Intersection, pointer : MouseEvent) {\n        if (!this.visible || !this.enabled) {\n            return;\n        }\n        if (this.previousSelection && this.isDragging) {\n            event.stopImmediatePropagation();\n            this.previousSelection.material.color.set(0xff0000);\n            this.isDragging = false;\n            if (this.previousSelection === this.line) {\n                this.dispatchEvent({\n                    type: 'zoomChange',\n                    position: this.stackHelper.slice.planePosition.clone(),\n                    direction: this.stackHelper.slice.planeDirection.clone(),\n                    oldPosition: this.oldPosition,\n                    oldDirection: this.oldDirection\n                });\n            } else {\n                this.dispatchEvent({\n                    type: 'orientationChange',\n                    position: this.stackHelper.slice.planePosition.clone(),\n                    direction: this.stackHelper.slice.planeDirection.clone(),\n                    oldPosition: this.oldPosition,\n                    oldDirection: this.oldDirection\n                 });\n            }\n        }\n    };\n\n    onMouseMove(intersection: THREE.Intersection, pointer : MouseEvent) {\n        if (!this.visible || !this.enabled) {\n            return;\n        }\n        if(intersection !== undefined) {\n            event.stopImmediatePropagation();\n        }\n        if (!this.isDragging) {\n            if (intersection === undefined) {\n                this.clearSelection();\n                return;\n            }\n            if(intersection.object !== this.line) {\n                this.highLightObject(intersection.object, 0xff0000);\n            }\n\n            // move intersection plane to intersection location\n            this.plane.setFromNormalAndCoplanarPoint(this.camera.getWorldDirection(this.plane.normal), intersection.object.position);\n        } else {\n            this.setUpRaycaster(event);\n            const intersectionPoint = new THREE.Vector3();\n            this.raycaster.ray.intersectPlane(this.plane, intersectionPoint);\n            const intersectionDirection = new THREE.Vector3();\n            intersectionDirection.copy(intersectionPoint).sub(this.startIntersection);\n            const distance = intersectionDirection.dot(this.stackHelper.slice.planeDirection);\n            event.stopImmediatePropagation();\n            // move the slice\n            if (this.previousSelection === this.line || this.previousSelection === this.cylinder\n                || this.previousSelection === this.arrowUp  || this.previousSelection === this.arrowDown) {\n                const offset = this.stackHelper.slice.planeDirection.clone();\n                offset.multiplyScalar(distance);\n                offset.add(this.originalSlicePosition);\n                // we need to find the position where the stack intersects the bounding box\n                // push the start of the ray a little back this helps with cases where ray\n                // starts at the edge of the volume and does not intersect it at all\n                const beginOffset = this.originalSlicePosition.clone();\n                beginOffset.sub(offset);\n                const interSetionPoint = this.intersectStackHelper(beginOffset, offset);\n                this.stackHelper.slice.planePosition.copy(interSetionPoint);\n            } else if (this.previousSelection === this.sphere) {\n                const direction = intersectionPoint.clone();\n                direction.sub(this.stackHelper.slice.planePosition);\n                this.stackHelper.slice.planeDirection.copy(direction);\n                this.stackHelper.slice.planeDirection.normalize();\n            }\n            this.stackHelper.slice._update();\n            this.stackHelper.border.helpersSlice = this.stackHelper.slice;\n            this.updateWidget();\n        }\n    };\n\n    getObjects() {\n        return this.children;\n    }\n\n    isEnabled() {\n        return this.visible;\n    }\n\n    updateWidget() {\n        // update line\n        this.geometryLine.vertices[0] = this.stackHelper.slice.planePosition.clone();\n\n        // update arrow\n        const middlePosition = this.stackHelper.slice.planeDirection.clone();\n        middlePosition.multiplyScalar(40.0);\n        middlePosition.add(this.stackHelper.slice.planePosition);\n        this.cylinder.position.set(middlePosition.x, middlePosition.y, middlePosition.z);\n        this.cylinder.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), this.stackHelper.slice.planeDirection);\n        this.arrowUp.position.set(middlePosition.x, middlePosition.y, middlePosition.z);\n        this.arrowUp.position.addScaledVector(this.stackHelper.slice.planeDirection,25);\n        this.arrowUp.quaternion.setFromUnitVectors(new THREE.Vector3(0, 1, 0), this.stackHelper.slice.planeDirection);\n        this.arrowDown.position.set(middlePosition.x, middlePosition.y, middlePosition.z);\n        this.arrowDown.position.addScaledVector(this.stackHelper.slice.planeDirection,-25);\n        this.arrowDown.quaternion.setFromUnitVectors(new THREE.Vector3(0, -1, 0), this.stackHelper.slice.planeDirection);\n\n        const endPosition = this.stackHelper.slice.planeDirection.clone();\n        endPosition.multiplyScalar(80.0);\n        endPosition.add(this.stackHelper.slice.planePosition);\n        this.geometryLine.vertices[1] = endPosition;\n        this.geometryLine.verticesNeedUpdate = true;\n        this.geometryLine.computeBoundingBox();\n        this.geometryLine.computeBoundingSphere();\n\n        // update sphere\n        this.sphere.position.copy(endPosition);\n    }\n\n    // highlight a object and returns previous highlighted object to original color\n    highLightObject(newObject, newColor) {\n        // store object previous color if we haven't done so\n        if (this.previousSelection !== newObject) {\n            if (this.previousSelection) {\n                this.previousSelection.material.color = this.previousSelection.previousColor.clone();\n            }\n            this.previousSelection = newObject;\n        }\n        if (!newObject.previousColor) {\n            newObject.previousColor = newObject.material.color.clone();\n        }\n        newObject.material.color.set(newColor);\n    }\n\n    clearSelection() {\n        if (this.previousSelection) {\n            this.previousSelection.material.color = this.previousSelection.previousColor.clone();\n        }\n        this.previousSelection = null;\n    }\n\n    setUpRaycaster(pointer) {\n        const rect = this.domElement.getBoundingClientRect();\n        const x = (pointer.clientX - rect.left) / rect.width;\n        const y = (pointer.clientY - rect.top) / rect.height;\n\n        const pointerVector = new THREE.Vector2((x * 2) - 1, - (y * 2) + 1);\n        this.raycaster.setFromCamera(pointerVector, this.camera);\n    }\n\n    // gives intersection with the inside of the bounding box\n    // of the bounding box\n    intersectStackHelper(beginpoint, endpoint) {\n        const direction = endpoint.clone();\n        direction.sub(beginpoint);\n        const length = direction.length();\n        direction.normalize();\n        this.raycaster.set(beginpoint, direction);\n        // ray cast against bouding box\n        const geometry = new THREE.Object3D();\n        const mesh = this.stackHelper.children[0]._meshStack.clone();\n        mesh.material = new THREE.MeshBasicMaterial({\n            wireframe: false,\n            side: THREE.BackSide,\n        });\n        geometry.add(mesh);\n        const intersections = this.raycaster.intersectObjects(geometry.children, true);\n        if (intersections[0] && intersections[0].distance <= length) {\n            return intersections[0].point;\n        } else {\n            return endpoint;\n        }\n    }\n\n    finishCurrentTransition() {\n        if (this.changeTimeout !== undefined) {\n            clearInterval(this.changeTimeout);\n            this.changeTimeout = undefined;\n            this.changeSlicePosition(this.toPosition, this.toDirection, 0);\n          }\n    }\n\n    /**\n     * Changes the slice to a new position\n     * @param newPosition new position of the slice\n     * @param newDirection of the slice\n     * @param milliseconds transition time\n     */\n    changeSlicePosition(newPosition: THREE.Vector3, newDirection: THREE.Vector3, milliseconds: number) {\n        if (this.stackHelper.slice.planePosition.equals(newPosition) && this.stackHelper.slice.planeDirection.equals(newDirection)) {\n            return;\n        }\n        if (milliseconds <= 0) {\n            this.stackHelper.slice.planePosition.copy(newPosition);\n            this.stackHelper.slice.planeDirection.copy(newDirection);\n            this.stackHelper.slice._update();\n            this.stackHelper.border.helpersSlice = this.stackHelper.slice;\n            this.updateWidget();\n        } else {\n            //cancel previous animation\n            if (this.changeTimeout !== undefined) {\n                clearInterval(this.changeTimeout);\n                this.changeTimeout = undefined;\n            }\n            let changeTime = 0;\n            const delta = 30 / milliseconds;\n            this.toPosition = newPosition;\n            this.toDirection = newDirection;\n            this.changeTimeout = setInterval((fromPosition, fromDirection, toPosition, toDirection) => {\n                this.enabled = false;\n                const t = changeTime;\n                const interPolateTime = t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; // ease in/out function\n\n                const nextPosition = fromPosition.clone();\n                const distancePosition = toPosition.clone();\n                distancePosition.sub(fromPosition);\n                nextPosition.addScaledVector(distancePosition, interPolateTime);\n\n                const nextDirection = fromDirection.clone();\n                const distanceUp = toDirection.clone();\n                distanceUp.sub(fromDirection);\n                nextDirection.addScaledVector(distanceUp, interPolateTime);\n                nextDirection.normalize();\n\n                this.changeSlicePosition(nextPosition, nextDirection, 0);\n                changeTime += delta;\n                if (changeTime > 1.0) {\n                    this.changeSlicePosition(toPosition, toDirection, 0);\n                    clearInterval(this.changeTimeout);\n                    this.changeTimeout = undefined;\n                    this.enabled = true;\n                }\n            }, 30, this.stackHelper.slice.planePosition, this.stackHelper.slice.planeDirection, newPosition, newDirection);\n        }\n    };\n}\n","/**\n * STL loader converted to TypeScript. Original authors:\n * @author aleeper / http://adamleeper.com/\n * @author mrdoob / http://mrdoob.com/\n * @author gero3 / https://github.com/gero3\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\n *\n * Supports both binary and ASCII encoded files, with automatic detection of type.\n *\n * The loader returns a non-indexed buffer geometry.\n *\n * Limitations:\n *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\n *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\n *  ASCII decoding assumes file is UTF-8.\n *\n * Usage:\n *  let loader = new THREE.STLLoader();\n *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\n *    scene.add( new THREE.Mesh( geometry ) );\n *  });\n *\n * For binary STLs geometry might contain colors for vertices. To use it:\n *  // use the same code to load STL as above\n *  if (geometry.hasColors) {\n *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: THREE.VertexColors });\n *  } else { .... }\n *  let mesh = new THREE.Mesh( geometry, material );\n */\n// tslint:disable\n\nimport * as THREE from 'three';\n\n\nexport default class STLLoader {\n    private manager: THREE.LoadingManager;\n    constructor(manager?) {\n        this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n    }\n\n    load(url, onLoad, onProgress?, onError? ) {\n\n        const scope = this;\n\n        const loader = new THREE.FileLoader( scope.manager );\n        loader.setResponseType( 'arraybuffer' );\n        loader.load( url, function ( text ) {\n\n            try {\n\n                onLoad( scope.parse( text ) );\n\n            } catch ( exception ) {\n\n                if ( onError ) {\n\n                    onError( exception );\n\n                }\n\n            }\n\n        }, onProgress, onError );\n    }\n\n    parseBinary( data ) {\n\n        const reader = new DataView( data );\n        const faces = reader.getUint32( 80, true );\n\n        let r, g, b, hasColors = false, colors;\n        let defaultR, defaultG, defaultB, alpha;\n\n        // process STL header\n        // check for default color in header (\"COLOR=rgba\" sequence).\n\n        for ( let index = 0; index < 80 - 10; index ++ ) {\n\n            if ( ( reader.getUint32( index, false ) === 0x434F4C4F /*COLO*/ ) &&\n                ( reader.getUint8( index + 4 ) === 0x52 /*'R'*/ ) &&\n                ( reader.getUint8( index + 5 ) === 0x3D /*'='*/ ) ) {\n\n                hasColors = true;\n                colors = [];\n\n                defaultR = reader.getUint8( index + 6 ) / 255;\n                defaultG = reader.getUint8( index + 7 ) / 255;\n                defaultB = reader.getUint8( index + 8 ) / 255;\n                alpha = reader.getUint8( index + 9 ) / 255;\n\n            }\n\n        }\n\n        const dataOffset = 84;\n        const faceLength = 12 * 4 + 2;\n\n        const geometry : any = new THREE.BufferGeometry();\n\n        const vertices = [];\n        const normals = [];\n\n        for ( let face = 0; face < faces; face ++ ) {\n\n            const start = dataOffset + face * faceLength;\n            const normalX = reader.getFloat32( start, true );\n            const normalY = reader.getFloat32( start + 4, true );\n            const normalZ = reader.getFloat32( start + 8, true );\n\n            if ( hasColors ) {\n\n                const packedColor = reader.getUint16( start + 48, true );\n\n                if ( ( packedColor & 0x8000 ) === 0 ) {\n\n                    // facet has its own unique color\n\n                    r = ( packedColor & 0x1F ) / 31;\n                    g = ( ( packedColor >> 5 ) & 0x1F ) / 31;\n                    b = ( ( packedColor >> 10 ) & 0x1F ) / 31;\n\n                } else {\n\n                    r = defaultR;\n                    g = defaultG;\n                    b = defaultB;\n\n                }\n\n            }\n\n            for ( let i = 1; i <= 3; i ++ ) {\n\n                const vertexstart = start + i * 12;\n\n                vertices.push( reader.getFloat32( vertexstart, true ) );\n                vertices.push( reader.getFloat32( vertexstart + 4, true ) );\n                vertices.push( reader.getFloat32( vertexstart + 8, true ) );\n\n                normals.push( normalX, normalY, normalZ );\n\n                if ( hasColors ) {\n\n                    colors.push( r, g, b );\n\n                }\n\n            }\n\n        }\n\n        geometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( vertices ), 3 ) );\n        geometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( normals ), 3 ) );\n\n        if ( hasColors ) {\n\n            geometry.addAttribute( 'color', new THREE.BufferAttribute( new Float32Array( colors ), 3 ) );\n            geometry.hasColors = true;\n            geometry.alpha = alpha;\n\n        }\n\n        return geometry;\n\n    }\n\n    parse( data ) {\n\n        function isBinary( data ) {\n\n            let expect, faceSize, nFaces, reader;\n            reader = new DataView( data );\n            faceSize = ( 32 / 8 * 3 ) + ( ( 32 / 8 * 3 ) * 3 ) + ( 16 / 8 );\n            nFaces = reader.getUint32( 80, true );\n            expect = 80 + ( 32 / 8 ) + ( nFaces * faceSize );\n\n            if ( expect === reader.byteLength ) {\n\n                return true;\n\n            }\n\n            // An ASCII STL data must begin with 'solid ' as the first six bytes.\n            // However, ASCII STLs lacking the SPACE after the 'd' are known to be\n            // plentiful.  So, check the first 5 bytes for 'solid'.\n\n            // US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\n            const solid = [ 115, 111, 108, 105, 100 ];\n\n            for ( let i = 0; i < 5; i ++ ) {\n\n                // If solid[ i ] does not match the i-th byte, then it is not an\n                // ASCII STL; hence, it is binary and return true.\n\n                if ( solid[ i ] !== reader.getUint8( i, false ) ) {\n                     return true;\n                }\n\n             }\n\n            // First 5 bytes read \"solid\"; declare it to be an ASCII STL\n\n            return false;\n\n        }\n\n        function parseASCII( data ) {\n\n            const geometry = new THREE.BufferGeometry();\n            const patternFace = /facet([\\s\\S]*?)endfacet/g;\n            let faceCounter = 0;\n\n            const patternFloat = /[\\s]+([+-]?(?:\\d+.\\d+|\\d+.|\\d+|.\\d+)(?:[eE][+-]?\\d+)?)/.source;\n            const patternVertex = new RegExp( 'vertex' + patternFloat + patternFloat + patternFloat, 'g' );\n            const patternNormal = new RegExp( 'normal' + patternFloat + patternFloat + patternFloat, 'g' );\n\n            const vertices = [];\n            const normals = [];\n\n            const normal = new THREE.Vector3();\n\n            let result;\n\n            while ( ( result = patternFace.exec( data ) ) !== null ) {\n\n                let vertexCountPerFace = 0;\n                let normalCountPerFace = 0;\n\n                const text = result[ 0 ];\n\n                while ( ( result = patternNormal.exec( text ) ) !== null ) {\n\n                    normal.x = parseFloat( result[ 1 ] );\n                    normal.y = parseFloat( result[ 2 ] );\n                    normal.z = parseFloat( result[ 3 ] );\n                    normalCountPerFace ++;\n\n                }\n\n                while ( ( result = patternVertex.exec( text ) ) !== null ) {\n\n                    vertices.push( parseFloat( result[ 1 ] ), parseFloat( result[ 2 ] ), parseFloat( result[ 3 ] ) );\n                    normals.push( normal.x, normal.y, normal.z );\n                    vertexCountPerFace ++;\n\n                }\n\n                // every face have to own ONE valid normal\n\n                if ( normalCountPerFace !== 1 ) {\n\n                    console.error( 'THREE.STLLoader: Something isn\\'t right with the normal of face number ' + faceCounter );\n\n                }\n\n                // each face have to own THREE valid vertices\n\n                if ( vertexCountPerFace !== 3 ) {\n\n                    console.error( 'THREE.STLLoader: Something isn\\'t right with the vertices of face number ' + faceCounter );\n\n                }\n\n                faceCounter ++;\n\n            }\n\n            geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );\n            geometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( normals, 3 ) );\n\n            return geometry;\n\n        }\n\n        function ensureString( buffer ) {\n\n            if ( typeof buffer !== 'string' ) {\n\n                const arrayBuffer = new Uint8Array( buffer );\n\n                let str = '';\n\n                const  il = buffer.byteLength;\n\n                for ( let i = 0; i < il; i ++ ) {\n\n                    str += String.fromCharCode( arrayBuffer[ i ] ); // implicitly assumes little-endian\n\n                }\n\n                return str;\n\n            } else {\n\n                return buffer;\n\n            }\n\n        }\n\n        function ensureBinary( buffer ) {\n\n            if ( typeof buffer === 'string' ) {\n\n                const arrayBuffer = new Uint8Array( buffer.length );\n                for ( let i = 0; i < buffer.length; i ++ ) {\n\n                    arrayBuffer[ i ] = buffer.charCodeAt( i ) & 0xff; // implicitly assumes little-endian\n\n                }\n                return arrayBuffer.buffer || arrayBuffer;\n\n            } else {\n\n                return buffer;\n\n            }\n\n        }\n\n        // start\n\n        const binData = ensureBinary( data );\n\n        return isBinary( binData ) ? this.parseBinary( binData ) : parseASCII( ensureString( data ) );\n\n    }\n\n}\n","/**\n * Original authors from THREEJS repo\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin  / http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga  / http://lantiga.github.io\n */\n\n/*\n * Original file is from the AMI library (but I think they got it from Three.js)\n * Modified for the Visual Storytelling project to be able to get and save state\n * and to allow for smooth tansitions\n */\n\nimport * as THREE from 'three';\n\nexport enum STATE {\n  NONE = -1,\n  ROTATE = 0,\n  ZOOM = 1,\n  PAN = 2,\n  TOUCH_ROTATE = 3,\n  TOUCH_ZOOM = 4,\n  TOUCH_PAN = 5,\n  CUSTOM = 99\n}\n\nexport default class Trackball extends THREE.EventDispatcher {\n  private state: STATE = STATE.NONE;\n  private previousState: STATE = STATE.NONE;\n  public camera: THREE.Camera;\n  private domElement;\n  private screen = { left: 0, top: 0, width: 0, height: 0 };\n\n  public enabled: boolean = true;\n  public rotateSpeed: number = 1.0;\n  public zoomSpeed: number = 1.2;\n  public panSpeed: number = 0.3;\n\n  public noRotate: boolean = false;\n  public noZoom: boolean = false;\n  public noPan: boolean = false;\n  public noCustom: boolean = false;\n\n  private forceState = -1;\n\n  private staticMoving = false;\n  private dynamicDampingFactor = 0.2;\n\n  private minDistance = 0;\n  private maxDistance = Infinity;\n\n  private keys = [65 /* A*/, 83 /* S*/, 68];\n\n  // internals\n  public target = new THREE.Vector3();\n  private lastPosition = new THREE.Vector3();\n  private EPS: number = 0.000001;\n\n  private eye = new THREE.Vector3();\n\n  private movePrev = new THREE.Vector2();\n  private moveCurr = new THREE.Vector2();\n\n  private lastAxis = new THREE.Vector3();\n  private lastAngle = 0;\n\n  private zoomStart = new THREE.Vector2();\n  private zoomEnd = new THREE.Vector2();\n\n  private touchZoomDistanceStart = 0;\n  private touchZoomDistanceEnd = 0;\n\n  private panStart = new THREE.Vector2();\n  private panEnd = new THREE.Vector2();\n\n  private customStart = new THREE.Vector2();\n  private customEnd = new THREE.Vector2();\n\n  public target0: THREE.Vector3;\n  public position0: THREE.Vector3;\n  public up0: THREE.Vector3;\n\n  private changeTimeout = undefined;\n  private changeTime = 0.0;\n  private isDragging: boolean = false;\n\n  // the valaues we are transition too when aminating to a certain state\n  private toTarget : THREE.Vector3;\n  private toPosition : THREE.Vector3;\n  private toUp : THREE.Vector3;\n\n  constructor(object: THREE.Camera, domElement) {\n    super();\n\n    this.camera = object;\n    this.domElement = (domElement !== undefined) ? domElement : document;\n\n    // for reset\n    this.target0 = this.target.clone();\n    this.position0 = this.camera.position.clone();\n    this.up0 = this.camera.up.clone();\n\n\n    this.domElement.addEventListener('contextmenu', function (event) {\n      event.preventDefault();\n    }, false);\n\n    this.handleResize();\n\n    // force an update at start\n    this.update();\n  }\n\n  initEventListeners() {\n    this.domElement.addEventListener('mousedown', this.mousedown, false);\n    document.addEventListener('mousemove', this.mousemove, false);\n    document.addEventListener('mouseup', this.mouseup, false);\n\n    this.domElement.addEventListener('mousewheel', this.mousewheel, false);\n    this.domElement.addEventListener('DOMMouseScroll', this.mousewheel, false); // firefox\n\n    this.domElement.addEventListener('touchstart', this.touchstart, false);\n    this.domElement.addEventListener('touchend', this.touchend, false);\n    this.domElement.addEventListener('touchmove', this.touchmove, false);\n\n    window.addEventListener('keydown', this.keydown, false);\n    window.addEventListener('keyup', this.keyup, false);\n  }\n\n  // methods\n\n  handleResize() {\n    if (this.domElement === document) {\n      this.screen.left = 0;\n      this.screen.top = 0;\n      this.screen.width = window.innerWidth;\n      this.screen.height = window.innerHeight;\n    } else {\n      const box = this.domElement.getBoundingClientRect();\n      // adjustments come from similar code in the jquery offset() function\n      const d = this.domElement.ownerDocument.documentElement;\n      this.screen.left = box.left + window.pageXOffset - d.clientLeft;\n      this.screen.top = box.top + window.pageYOffset - d.clientTop;\n      this.screen.width = box.width;\n      this.screen.height = box.height;\n    }\n  };\n\n  handleEvent(event) {\n    if (typeof this[event.type] === 'function') {\n      this[event.type](event);\n    }\n  };\n\n  getMouseOnScreen(pageX: number, pageY: number) {\n    return new THREE.Vector2((pageX - this.screen.left) / this.screen.width,\n      (pageY - this.screen.top) / this.screen.height);\n  }\n\n  getMouseOnCircle(pageX, pageY) {\n    return new THREE.Vector2(\n      ((pageX - this.screen.width * 0.5 - this.screen.left) / (this.screen.width * 0.5)),\n      ((this.screen.height + 2 * (this.screen.top - pageY)) / this.screen.width) // screen.width intentional\n    );\n  }\n\n  rotateCamera = (function () {\n    const axis = new THREE.Vector3(),\n      quaternion = new THREE.Quaternion(),\n      eyeDirection = new THREE.Vector3(),\n      objectUpDirection = new THREE.Vector3(),\n      objectSidewaysDirection = new THREE.Vector3(),\n      moveDirection = new THREE.Vector3();\n\n    return function () {\n      moveDirection.set(this.moveCurr.x - this.movePrev.x, this.moveCurr.y - this.movePrev.y, 0);\n      let angle = moveDirection.length();\n\n      if (angle) {\n        this.eye.copy(this.camera.position).sub(this.target);\n\n        eyeDirection.copy(this.eye).normalize();\n        objectUpDirection.copy(this.camera.up).normalize();\n        objectSidewaysDirection.crossVectors(objectUpDirection, eyeDirection).normalize();\n\n        objectUpDirection.setLength(this.moveCurr.y - this.movePrev.y);\n        objectSidewaysDirection.setLength(this.moveCurr.x - this.movePrev.x);\n\n        moveDirection.copy(objectUpDirection.add(objectSidewaysDirection));\n\n        axis.crossVectors(moveDirection, this.eye).normalize();\n\n        angle *= this.rotateSpeed;\n        quaternion.setFromAxisAngle(axis, angle);\n\n        this.eye.applyQuaternion(quaternion);\n        this.camera.up.applyQuaternion(quaternion);\n\n        this.lastAxis.copy(axis);\n        this.lastAngle = angle;\n      } else if (!this.staticMoving && this.lastAngle) {\n        this.lastAngle *= Math.sqrt(1.0 - this.dynamicDampingFactor);\n        this.eye.copy(this.camera.position).sub(this.target);\n        quaternion.setFromAxisAngle(this.lastAxis, this.lastAngle);\n        this.eye.applyQuaternion(quaternion);\n        this.camera.up.applyQuaternion(quaternion);\n      }\n\n      this.movePrev.copy(this.moveCurr);\n    };\n  }());\n\n  zoomCamera = function () {\n    let factor;\n\n    if (this.state === STATE.TOUCH_ZOOM) {\n      factor = this.touchZoomDistanceStart / this.touchZoomDistanceEnd;\n      this.touchZoomDistanceStart = this.touchZoomDistanceEnd;\n      this.eye.multiplyScalar(factor);\n    } else {\n      factor = 1.0 + (this.zoomEnd.y - this.zoomStart.y) * this.zoomSpeed;\n\n      if (factor !== 1.0 && factor > 0.0) {\n        this.eye.multiplyScalar(factor);\n\n        if (this.staticMoving) {\n          this.zoomStart.copy(this.zoomEnd);\n        } else {\n          this.zoomStart.y += (this.zoomEnd.y - this.zoomStart.y) * this.dynamicDampingFactor;\n        }\n      }\n    }\n  };\n\n  panCamera = (function () {\n    const mouseChange = new THREE.Vector2(),\n      objectUp = new THREE.Vector3(),\n      pan = new THREE.Vector3();\n\n    return function () {\n      mouseChange.copy(this.panEnd).sub(this.panStart);\n\n      if (mouseChange.lengthSq()) {\n        mouseChange.multiplyScalar(this.eye.length() * this.panSpeed);\n\n        pan.copy(this.eye).cross(this.camera.up).setLength(mouseChange.x);\n        pan.add(objectUp.copy(this.camera.up).setLength(mouseChange.y));\n\n        this.camera.position.add(pan);\n        this.target.add(pan);\n\n        if (this.staticMoving) {\n          this.panStart.copy(this.panEnd);\n        } else {\n          this.panStart.add(mouseChange.subVectors(this.panEnd, this.panStart).multiplyScalar(this.dynamicDampingFactor));\n        }\n      }\n    };\n  }());\n\n  checkDistances() {\n    if (!this.noZoom || !this.noPan) {\n      if (this.eye.lengthSq() > this.maxDistance * this.maxDistance) {\n        this.camera.position.addVectors(this.target, this.eye.setLength(this.maxDistance));\n      }\n\n      if (this.eye.lengthSq() < this.minDistance * this.minDistance) {\n        this.camera.position.addVectors(this.target, this.eye.setLength(this.minDistance));\n      }\n    }\n  };\n\n  update() {\n    this.eye.subVectors(this.camera.position, this.target);\n\n    if (!this.noRotate) {\n      this.rotateCamera();\n    }\n\n    if (!this.noZoom) {\n      this.zoomCamera();\n    }\n\n    if (!this.noPan) {\n      this.panCamera();\n    }\n\n    if (!this.noCustom) {\n      this.custom(this.customStart, this.customEnd);\n    }\n\n    this.camera.position.addVectors(this.target, this.eye);\n\n    this.checkDistances();\n\n    this.camera.lookAt(this.target);\n\n    if (this.lastPosition.distanceToSquared(this.camera.position) > this.EPS) {\n      this.dispatchEvent({ type: 'change' });\n\n      this.lastPosition.copy(this.camera.position);\n    }\n  };\n\n  finishCurrentTransition() {\n    if (this.changeTimeout !== undefined) {\n      clearInterval(this.changeTimeout);\n      this.changeTimeout = undefined;\n      this.changeCamera(this.toPosition, this.toTarget, this.toUp, 0);\n    }\n  }\n\n  changeCamera(newPosition:THREE.Vector3, newTarget:THREE.Vector3, newUp:THREE.Vector3, milliseconds: number, done?: () => void) {\n    if (this.target.equals(newTarget) && this.camera.position.equals(newPosition) && this.camera.up.equals(newUp)) {\n      return;\n    }\n    if (milliseconds <= 0) {\n      this.state = STATE.NONE;\n      this.previousState = STATE.NONE;\n\n      this.target.copy(newTarget);\n      this.camera.position.copy(newPosition);\n      this.camera.up.copy(newUp);\n\n      this.eye.subVectors(this.camera.position, this.target);\n\n      this.camera.lookAt(this.target);\n\n      //_this.dispatchEvent(changeEvent);\n\n      this.lastPosition.copy(this.camera.position);\n    } else {\n      //cancel previous animation\n      if (this.changeTimeout !== undefined) {\n        clearInterval(this.changeTimeout);\n        this.changeTimeout = undefined;\n      }\n      this.toTarget = newTarget;\n      this.toPosition = newPosition;\n      this.toUp = newUp;\n      let changeTime = 0;\n      const delta = 30/milliseconds;\n      this.changeTimeout = setInterval((fromTarget, fromPosition, fromUp, toTarget, toPosition, toUp) => {\n        this.enabled = false;\n        const t = changeTime;\n        const interPolateTime = t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; // ease in/out function\n\n        const nextPosition = fromPosition.clone();\n        const distancePosition = toPosition.clone();\n        distancePosition.sub(fromPosition);\n        nextPosition.addScaledVector(distancePosition, interPolateTime);\n\n        const nextTarget = fromTarget.clone();\n        const distanceTarget = toTarget.clone();\n        distanceTarget.sub(fromTarget);\n        nextTarget.addScaledVector(distanceTarget, interPolateTime);\n\n        const nextUp = fromUp.clone();\n        const distanceUp = toUp.clone();\n        distanceUp.sub(fromUp);\n        nextUp.addScaledVector(distanceUp, interPolateTime);\n        nextUp.normalize();\n\n        this.changeCamera(nextPosition, nextTarget, nextUp, 0);\n        changeTime += delta;\n        if (changeTime > 1.0) {\n          this.changeCamera(toPosition, toTarget, toUp, 0);\n          //console.log('end anim');\n          clearInterval(this.changeTimeout);\n          this.changeTimeout = undefined;\n          this.enabled = true;\n          if(done) {\n            done();\n          }\n        }\n      }, 30, this.target.clone(), this.camera.position.clone(), this.camera.up.clone(), newTarget, newPosition, newUp);\n    }\n  };\n\n  reset() {\n    this.changeCamera(this.target0, this.position0, this.up0, 0);\n    this.dispatchEvent({ type: 'change' });\n  };\n\n  setState(targetState) {\n    this.forceState = targetState;\n    this.previousState = targetState;\n    this.state = targetState;\n  };\n\n  custom(customStart, customEnd) {\n    //TODO Nothing yet\n  };\n\n  // listeners\n\n  keydown(event) {\n    if (this.enabled === false) {\n      return;\n    }\n\n    window.removeEventListener('keydown', this.keydown);\n\n    this.previousState = this.state;\n\n    if (this.state !== STATE.NONE) {\n      return;\n    } else if (event.keyCode === this.keys[STATE.ROTATE] && !this.noRotate) {\n      this.state = STATE.ROTATE;\n    } else if (event.keyCode === this.keys[STATE.ZOOM] && !this.noZoom) {\n      this.state = STATE.ZOOM;\n    } else if (event.keyCode === this.keys[STATE.PAN] && !this.noPan) {\n      this.state = STATE.PAN;\n    }\n  }\n\n  keyup(event) {\n    if (this.enabled === false) { return; }\n\n    this.state = this.previousState;\n\n    window.addEventListener('keydown', this.keydown, false);\n  }\n\n  private mousedown = (event) => {\n    if (this.enabled === false) { return; }\n\n    this.isDragging = true;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.state === STATE.NONE) {\n      this.state = event.button;\n    }\n\n    if (this.state === STATE.ROTATE && !this.noRotate) {\n      this.moveCurr.copy(this.getMouseOnCircle(event.pageX, event.pageY));\n      this.movePrev.copy(this.moveCurr);\n    } else if (this.state === STATE.ZOOM && !this.noZoom) {\n      this.zoomStart.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n      this.zoomEnd.copy(this.zoomStart);\n    } else if (this.state === STATE.PAN && !this.noPan) {\n      this.panStart.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n      this.panEnd.copy(this.panStart);\n    } else if (this.state === STATE.CUSTOM && !this.noCustom) {\n      this.customStart.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n      this.customEnd.copy(this.panStart);\n    }\n\n    this.dispatchEvent({ type: 'start' });\n  }\n\n  private mousemove = (event) => {\n    if (this.enabled === false || !this.isDragging) { return; }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.state === STATE.ROTATE && !this.noRotate) {\n      this.movePrev.copy(this.moveCurr);\n      this.moveCurr.copy(this.getMouseOnCircle(event.pageX, event.pageY));\n    } else if (this.state === STATE.ZOOM && !this.noZoom) {\n      this.zoomEnd.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n    } else if (this.state === STATE.PAN && !this.noPan) {\n      this.panEnd.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n    } else if (this.state === STATE.CUSTOM && !this.noCustom) {\n      this.customEnd.copy(this.getMouseOnScreen(event.pageX, event.pageY));\n    }\n  }\n\n  private mouseup = (event) => {\n    if (this.enabled === false || !this.isDragging) { return; }\n\n    this.isDragging = false;\n\n    event.preventDefault();\n    event.stopPropagation();\n    const previousState = this.state;\n    if (this.forceState === -1) {\n      this.state = STATE.NONE;\n    }\n\n    this.dispatchEvent({ type: 'end', state: previousState, newTarget: this.target, newPosition: this.camera.position, newUp: this.camera.up });\n  }\n\n  private mousewheel = (event) => {\n    if (this.enabled === false) { return; }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    let delta = 0;\n\n    if (event.wheelDelta) {\n      // WebKit / Opera / Explorer 9\n\n      delta = event.wheelDelta / 40;\n    } else if (event.detail) {\n      // Firefox\n\n      delta = -event.detail / 3;\n    }\n\n    if (this.state !== STATE.CUSTOM) {\n      this.zoomStart.y += delta * 0.01;\n    } else if (this.state === STATE.CUSTOM) {\n      this.customStart.y += delta * 0.01;\n    }\n\n    this.dispatchEvent({ type: 'zoomstart' });\n    this.dispatchEvent({ type: 'zoomend', state: STATE.ZOOM, newTarget: this.target, newPosition: this.target, newUp: this.target });\n  }\n\n  touchstart(event) {\n    if (this.enabled === false) { return; }\n\n    if (this.forceState === -1) {\n      switch (event.touches.length) {\n        case 1:\n          this.state = STATE.TOUCH_ROTATE;\n          this.moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          this.movePrev.copy(this.moveCurr);\n          break;\n\n        case 2:\n          this.state = STATE.TOUCH_ZOOM;\n          const dx = event.touches[0].pageX - event.touches[1].pageX;\n          const dy = event.touches[0].pageY - event.touches[1].pageY;\n          this.touchZoomDistanceEnd = this.touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n\n          const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this.panStart.copy(this.getMouseOnScreen(x, y));\n          this.panEnd.copy(this.panStart);\n          break;\n\n        default:\n          this.state = STATE.NONE;\n      }\n    } else {\n      // { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4, CUSTOM: 99 };\n      switch (this.state) {\n        case 0:\n          // 1 or 2 fingers, smae behavior\n          this.state = STATE.TOUCH_ROTATE;\n          this.moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          this.movePrev.copy(this.moveCurr);\n          break;\n\n        case 1:\n        case 4:\n          if (event.touches.length >= 2) {\n            this.state = STATE.TOUCH_ZOOM;\n            const dx = event.touches[0].pageX - event.touches[1].pageX;\n            const dy = event.touches[0].pageY - event.touches[1].pageY;\n            this.touchZoomDistanceEnd = this.touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n          } else {\n            this.state = STATE.ZOOM;\n            this.zoomStart.copy(this.getMouseOnScreen(event.touches[0].pageX, event.touches[0].pageY));\n            this.zoomEnd.copy(this.zoomStart);\n          }\n          break;\n\n        case 2:\n        case 5:\n          if (event.touches.length >= 2) {\n            this.state = STATE.TOUCH_PAN;\n            const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n            const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n            this.panStart.copy(this.getMouseOnScreen(x, y));\n            this.panEnd.copy(this.panStart);\n          } else {\n            this.state = STATE.PAN;\n            this.panStart.copy(this.getMouseOnScreen(event.touches[0].pageX, event.touches[0].pageY));\n            this.panEnd.copy(this.panStart);\n          }\n          break;\n\n        case 99:\n          this.state = STATE.CUSTOM;\n          const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this.customStart.copy(this.getMouseOnScreen(x, y));\n          this.customEnd.copy(this.customStart);\n          break;\n\n        default:\n          this.state = STATE.NONE;\n      }\n    }\n\n    this.dispatchEvent({ type: 'start' });\n  }\n\n  touchmove(event) {\n    if (this.enabled === false) { return; }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (this.forceState === -1) {\n      switch (event.touches.length) {\n        case 1:\n          this.movePrev.copy(this.moveCurr);\n          this.moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          break;\n\n        case 2:\n          const dx = event.touches[0].pageX - event.touches[1].pageX;\n          const dy = event.touches[0].pageY - event.touches[1].pageY;\n          this.touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n\n          const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this.panEnd.copy(this.getMouseOnScreen(x, y));\n          break;\n\n        default:\n          this.state = STATE.NONE;\n      }\n    } else {\n      let x, y;\n\n      // { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4, CUSTOM: 99 };\n      switch (this.state) {\n        case 0:\n          this.movePrev.copy(this.moveCurr);\n          this.moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          break;\n\n        case 1:\n          this.zoomEnd.copy(this.getMouseOnScreen(event.touches[0].pageX, event.touches[0].pageY));\n          break;\n\n        case 2:\n          this.panEnd.copy(this.getMouseOnScreen(event.touches[0].pageX, event.touches[0].pageY));\n          break;\n\n        case 4:\n          // 2 fingers!\n          // TOUCH ZOOM\n          const dx = event.touches[0].pageX - event.touches[1].pageX;\n          const dy = event.touches[0].pageY - event.touches[1].pageY;\n          this.touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n          break;\n\n        case 5:\n          // 2 fingers\n          // TOUCH_PAN\n          x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this.panEnd.copy(this.getMouseOnScreen(x, y));\n          break;\n\n        case 99:\n          x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this.customEnd.copy(this.getMouseOnScreen(x, y));\n          break;\n\n        default:\n          this.state = STATE.NONE;\n      }\n    }\n  }\n\n  touchend(event) {\n    if (this.enabled === false) { return; }\n\n    if (this.forceState === -1) {\n      switch (event.touches.length) {\n        case 1:\n          this.movePrev.copy(this.moveCurr);\n          this.moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          break;\n\n        case 2:\n          this.touchZoomDistanceStart = this.touchZoomDistanceEnd = 0;\n\n          const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this.panEnd.copy(this.getMouseOnScreen(x, y));\n          this.panStart.copy(this.panEnd);\n          break;\n      }\n\n      this.state = STATE.NONE;\n    } else {\n      switch (this.state) {\n        case 0:\n          this.movePrev.copy(this.moveCurr);\n          this.moveCurr.copy(this.getMouseOnCircle(event.touches[0].pageX, event.touches[0].pageY));\n          break;\n\n        case 1:\n        case 2:\n          break;\n\n        case 4:\n          // TOUCH ZOOM\n          this.touchZoomDistanceStart = this.touchZoomDistanceEnd = 0;\n          this.state = STATE.ZOOM;\n          break;\n\n        case 5:\n          // TOUCH ZOOM\n          if (event.touches.length >= 2) {\n            const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n            const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n            this.panEnd.copy(this.getMouseOnScreen(x, y));\n            this.panStart.copy(this.panEnd);\n          }\n          this.state = STATE.PAN;\n          break;\n\n        case 99:\n          const x = (event.touches[0].pageX + event.touches[1].pageX) / 2;\n          const y = (event.touches[0].pageY + event.touches[1].pageY) / 2;\n          this.customEnd.copy(this.getMouseOnScreen(x, y));\n          this.customStart.copy(this.customEnd);\n          break;\n\n        default:\n          this.state = STATE.NONE;\n      }\n    }\n    this.dispatchEvent({ type: 'end', state: this.state, newTarget: this.target, newPosition: this.target, newUp: this.target });\n  }\n}\n","module.exports = \"#slideDeck {\\n    background-color: white;\\n}\"","import { Component, ElementRef, OnInit, ViewEncapsulation } from '@angular/core';\nimport { ProvenanceService } from '../provenance.service';\n\nimport {\n  ProvenanceSlide,\n  ProvenanceSlidedeck,\n  ProvenanceSlidedeckVisualization,\n  ProvenanceSlidePlayer,\n} from '../../../../provenance-slide-deck';\n// todo: update to normal node_modules path when published\n\n@Component({\n  selector: 'app-provenance-slides',\n  template: '<button mat-button color=\"primary\" (click)=\"addSlide()\">Add slide</button><div id=\"slideDeck\"></div>',\n  styleUrls: ['./provenance-slides.component.css'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class ProvenanceSlidesComponent implements OnInit {\n  private _deck: ProvenanceSlidedeck;\n  private _deckViz: ProvenanceSlidedeckVisualization;\n  constructor(private elementRef: ElementRef, private provenance: ProvenanceService) {\n\n  }\n\n  addSlide() {\n    this._deck.addSlide(new ProvenanceSlide('slide', 1000, 1000));\n  }\n\n  ngOnInit() {\n    this._deck = new ProvenanceSlidedeck(this.provenance.graph.application, this.provenance.traverser);\n    this._deckViz = new ProvenanceSlidedeckVisualization(this._deck, this.elementRef.nativeElement.children[1]);\n  }\n\n}\n","module.exports = \"app-provenance-visualization {\\n    height: 300px;\\n    width: 300px;\\n    display: block;\\n}\\n\\n.node {\\n    fill: lightsteelblue;\\n    stroke: steelblue;\\n    cursor: pointer;\\n}\\n\\n.node circle {\\n    stroke-width: .3px;\\n}\\n\\n.node.branch-active {\\n    fill: yellow;\\n    background-color: #ccc;\\n}\\n\\n.node.branch-active text {\\n    display: block;\\n}\\n\\n.node.node-active {\\n    fill: blue;\\n    stroke: darkblue;\\n}\\n\\n.node text {\\n    display: none;\\n    fill: white;\\n    stroke-width: 0;\\n    font-family: sans-serif;\\n}\\n\\n.link {\\n    fill: none;\\n    stroke: white;\\n    stroke-width: .5px;\\n}\\n\\n.link.active {\\n    stroke: white;\\n}\"","import { Component, ElementRef, OnInit, ViewEncapsulation } from '@angular/core';\nimport { ProvenanceService } from '../provenance.service';\nimport { ProvenanceTreeVisualization } from '@visualstorytelling/provenance-tree-visualization';\n\n@Component({\n  selector: 'app-provenance-visualization',\n  template: '',\n  styleUrls: ['./provenance-visualization.component.css'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class ProvenanceVisualizationComponent implements OnInit {\n  private _viz: ProvenanceTreeVisualization;\n  constructor(private elementRef: ElementRef, private provenance: ProvenanceService) {\n  }\n\n  ngOnInit() {\n    this._viz = new ProvenanceTreeVisualization(\n      this.provenance.traverser,\n      this.elementRef.nativeElement,\n    );\n  }\n\n}\n","import { Injectable } from '@angular/core';\n\nimport {\n  ProvenanceGraph,\n  ProvenanceTracker,\n  ProvenanceGraphTraverser,\n  ActionFunctionRegistry,\n} from '@visualstorytelling/provenance-core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProvenanceService {\n  public graph: ProvenanceGraph;\n  public registry: ActionFunctionRegistry;\n  public tracker: ProvenanceTracker;\n  public traverser: ProvenanceGraphTraverser;\n\n  constructor() {\n    this.graph = new ProvenanceGraph({ name: 'brainvis', version: '1.0.0' });\n    this.registry = new ActionFunctionRegistry();\n    this.tracker = new ProvenanceTracker(this.registry, this.graph);\n    this.traverser = new ProvenanceGraphTraverser(this.registry, this.graph, this.tracker);\n\n    // todo: remove objects from window (used for dev / debug)\n    const w = window as any;\n    w.graph = this.graph;\n    w.registry = this.registry;\n    w.tracker = this.tracker;\n    w.traverser = this.traverser;\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","/* There is a bug in `ami.js` so that it needs a global THREE when imported.\n   This file ensures it is attached to `window` before the rest of the app is loaded\n */\n(window as any).THREE = require('three');\nrequire('./init.ts');\n"],"sourceRoot":""}